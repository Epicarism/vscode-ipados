# Agent: timeline-panel-worker
**Status:** done
**Tokens:** 29,336
**Cost:** $0.0000
**Time:** 2026-02-09T10:51:03.692Z

## Task
Create TimelineView.swift - VS Code-style Timeline panel showing file history. Show list of file changes with: timestamp, author/source (Git/Local), change description, diff indicator. Support filtering by source (Git commits, Local saves). Mock data for now but structure for real git integration later. File: VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift

## Response
>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift"} 
>>>END>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift"} 
>>>END

>>>TOOL list_dir
{"path":"VSCodeiPadOS"} 
>>>END

>>>TOOL list_dir
{"path":""}
>>>END

>>>TOOL list_dir
{"path":"VSCodeiPadOS"} 
>>>END

>>>TOOL list_dir
{"path":"./VSCodeiPadOS"}
>>>END

>>>TOOL search
{"query":"TimelineView", "glob":"**/*.swift"}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/Views/Panels/TimelineView.swift"}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift"}
>>>END

>>>TOOL list_dir
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels"}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":200}
>>>END

>>>TOOL list_dir
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels"}
>>>END

>>>TOOL read_file
{"path":"/Users/danielswagg/PLAYGROUND/vscode-ipados/VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":200}
>>>END

>>>TOOL create_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","content":"import SwiftUI\n\n// MARK: - Timeline Models\n\n/// Represents a single change in a file's history (Git commit, local save, etc.).\nstruct TimelineEntry: Identifiable, Hashable {\n    enum Source: String, CaseIterable, Hashable {\n        case git = \"Git\"\n        case local = \"Local\"\n\n        var label: String { rawValue }\n\n        var systemImage: String {\n            switch self {\n            case .git: return \"arrow.triangle.branch\"\n            case .local: return \"internaldrive\"\n            }\n        }\n\n        var tint: Color {\n            switch self {\n            case .git: return .blue\n            case .local: return .orange\n            }\n        }\n    }\n\n    struct DiffSummary: Hashable {\n        var added: Int\n        var deleted: Int\n\n        var isEmpty: Bool { added == 0 && deleted == 0 }\n\n        var text: String {\n            // VS Code-ish compact summary: +12 −4\n            let plus = added > 0 ? \"+\\(added)\" : nil\n            let minus = deleted > 0 ? \"−\\(deleted)\" : nil\n            return [plus, minus].compactMap { $0 }.joined(separator: \" \")\n        }\n    }\n\n    let id: UUID\n    let timestamp: Date\n    let source: Source\n    /// \"Author\" for git; \"Device/User\" for local saves.\n    let author: String\n    /// Short change description (commit message, save reason, etc.)\n    let message: String\n    /// Optional diff summary if available.\n    let diff: DiffSummary?\n\n    init(\n        id: UUID = UUID(),\n        timestamp: Date,\n        source: Source,\n        author: String,\n        message: String,\n        diff: DiffSummary? = nil\n    ) {\n        self.id = id\n        self.timestamp = timestamp\n        self.source = source\n        self.author = author\n        self.message = message\n        self.diff = diff\n    }\n}\n\n// MARK: - Provider (structure for future Git integration)\n\n/// Abstraction point for later wiring to real Git history / local save tracking.\nprotocol TimelineProviding {\n    /// - Parameter filePath: A workspace-relative file path (or identifier) to fetch history for.\n    func timelineEntries(for filePath: String?) async -> [TimelineEntry]\n}\n\n/// Mock provider used for now.\nstruct MockTimelineProvider: TimelineProviding {\n    func timelineEntries(for filePath: String?) async -> [TimelineEntry] {\n        let now = Date()\n        // NOTE: Mock data only. Replace with real Git + local-save sources later.\n        return [\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 5),\n                source: .local,\n                author: \"This iPad\",\n                message: \"Saved\",\n                diff: .init(added: 2, deleted: 0)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 22),\n                source: .local,\n                author: \"This iPad\",\n                message: \"Auto Save\",\n                diff: .init(added: 0, deleted: 1)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 3),\n                source: .git,\n                author: \"alex\",\n                message: \"Fix layout for timeline rows\",\n                diff: .init(added: 18, deleted: 6)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 8),\n                source: .git,\n                author: \"alex\",\n                message: \"Add Timeline panel skeleton\",\n                diff: .init(added: 124, deleted: 0)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 24),\n                source: .git,\n                author: \"sam\",\n                message: \"Initial commit\",\n                diff: .init(added: 980, deleted: 0)\n            )\n        ]\n    }\n}\n\n// MARK: - View Model\n\n@MainActor\nfinal class TimelineViewModel: ObservableObject {\n    enum SourceFilter: String, CaseIterable, Identifiable {\n        case all = \"All\"\n        case git = \"Git\"\n        case local = \"Local\"\n\n        var id: String { rawValue }\n\n        func includes(_ source: TimelineEntry.Source) -> Bool {\n            switch self {\n            case .all: return true\n            case .git: return source == .git\n            case .local: return source == .local\n            }\n        }\n    }\n\n    @Published var filter: SourceFilter = .all\n    @Published private(set) var entries: [TimelineEntry] = []\n    @Published private(set) var isLoading: Bool = false\n\n    private let provider: any TimelineProviding\n    private let filePath: String?\n\n    init(filePath: String? = nil, provider: any TimelineProviding = MockTimelineProvider()) {\n        self.filePath = filePath\n        self.provider = provider\n    }\n\n    var filteredEntries: [TimelineEntry] {\n        entries\n            .filter { filter.includes($0.source) }\n            .sorted { $0.timestamp > $1.timestamp }\n    }\n\n    func load() async {\n        isLoading = true\n        defer { isLoading = false }\n        entries = await provider.timelineEntries(for: filePath)\n    }\n}\n\n// MARK: - Timeline View\n\n/// VS Code-style Timeline panel: shows file history and allows filtering by source.\nstruct TimelineView: View {\n    @StateObject private var viewModel: TimelineViewModel\n\n    init(filePath: String? = nil, provider: any TimelineProviding = MockTimelineProvider()) {\n        _viewModel = StateObject(wrappedValue: TimelineViewModel(filePath: filePath, provider: provider))\n    }\n\n    var body: some View {\n        VStack(spacing: 0) {\n            header\n            Divider()\n\n            if viewModel.isLoading {\n                loading\n            } else if viewModel.filteredEntries.isEmpty {\n                empty\n            } else {\n                list\n            }\n        }\n        .task {\n            await viewModel.load()\n        }\n    }\n\n    // MARK: Header\n\n    private var header: some View {\n        HStack(spacing: 12) {\n            Text(\"Timeline\")\n                .font(.headline)\n\n            Spacer()\n\n            Picker(\"Source\", selection: $viewModel.filter) {\n                ForEach(TimelineViewModel.SourceFilter.allCases) { filter in\n                    Text(filter.rawValue).tag(filter)\n                }\n            }\n            .pickerStyle(.segmented)\n            .frame(maxWidth: 320)\n        }\n        .padding(.horizontal, 12)\n        .padding(.vertical, 10)\n        .background(Color(.secondarySystemBackground))\n    }\n\n    // MARK: Content\n\n    private var list: some View {\n        List {\n            ForEach(viewModel.filteredEntries) { entry in\n                TimelineRow(entry: entry)\n                    .listRowInsets(EdgeInsets(top: 8, leading: 12, bottom: 8, trailing: 12))\n            }\n        }\n        .listStyle(.plain)\n    }\n\n    private var loading: some View {\n        VStack(spacing: 12) {\n            ProgressView()\n            Text(\"Loading history…\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(20)\n        .background(Color(.systemBackground))\n    }\n\n    private var empty: some View {\n        VStack(alignment: .center, spacing: 10) {\n            Text(\"No timeline entries\")\n                .font(.headline)\n            Text(\"Try changing the filter or select a file with history.\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(20)\n        .background(Color(.systemBackground))\n    }\n}\n\n// MARK: - Row\n\nprivate struct TimelineRow: View {\n    let entry: TimelineEntry\n\n    var body: some View {\n        HStack(alignment: .top, spacing: 10) {\n            sourceIcon\n\n            VStack(alignment: .leading, spacing: 6) {\n                HStack(alignment: .firstTextBaseline, spacing: 8) {\n                    Text(entry.message)\n                        .font(.body)\n                        .foregroundStyle(.primary)\n                        .lineLimit(2)\n\n                    Spacer(minLength: 8)\n\n                    if let diff = entry.diff, !diff.isEmpty {\n                        DiffBadge(diff: diff)\n                    }\n                }\n\n                HStack(spacing: 8) {\n                    Text(entry.author)\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                        .lineLimit(1)\n\n                    Text(\"•\")\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n\n                    Text(Self.timestampFormatter.string(from: entry.timestamp))\n                        .font(.caption.monospacedDigit())\n                        .foregroundStyle(.secondary)\n                        .lineLimit(1)\n\n                    Spacer(minLength: 0)\n\n                    Text(entry.source.label)\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                }\n            }\n        }\n        .padding(.vertical, 2)\n        .contentShape(Rectangle())\n        // Future: selection / open diff action hook.\n    }\n\n    private var sourceIcon: some View {\n        ZStack {\n            RoundedRectangle(cornerRadius: 8, style: .continuous)\n                .fill(entry.source.tint.opacity(0.12))\n                .frame(width: 28, height: 28)\n\n            Image(systemName: entry.source.systemImage)\n                .font(.system(size: 13, weight: .semibold))\n                .foregroundStyle(entry.source.tint)\n        }\n        .padding(.top, 2)\n    }\n\n    private static let timestampFormatter: DateFormatter = {\n        let df = DateFormatter()\n        df.dateStyle = .none\n        df.timeStyle = .short\n        return df\n    }()\n}\n\nprivate struct DiffBadge: View {\n    let diff: TimelineEntry.DiffSummary\n\n    var body: some View {\n        Text(diff.text)\n            .font(.caption.monospacedDigit())\n            .foregroundStyle(.secondary)\n            .padding(.horizontal, 8)\n            .padding(.vertical, 4)\n            .background(\n                RoundedRectangle(cornerRadius: 8, style: .continuous)\n                    .fill(Color(.tertiarySystemFill))\n            )\n            .accessibilityLabel(accessibilityText)\n    }\n\n    private var accessibilityText: String {\n        var parts: [String] = []\n        if diff.added > 0 { parts.append(\"\\(diff.added) added\") }\n        if diff.deleted > 0 { parts.append(\"\\(diff.deleted) deleted\") }\n        return parts.isEmpty ? \"No changes\" : parts.joined(separator: \", \")\n    }\n}\n\n// MARK: - Previews\n\n#Preview {\n    TimelineView()\n        .frame(width: 420, height: 600)\n}\n"} 
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":200}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":200,"end_line":420}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":40}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":160,"end_line":360}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":40}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":120,"end_line":220}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":220,"end_line":380}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":160,"end_line":260}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":30}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":20}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":160}
>>>END

>>>TOOL search
{"query":"#Preview", "glob":"**/*.swift"}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":40}
>>>END

>>>TOOL create_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","content":"import SwiftUI\nimport Foundation\n\n// MARK: - Timeline Models\n\n/// Represents a single change in a file's history (Git commit, local save, etc.).\nstruct TimelineEntry: Identifiable, Hashable {\n    enum Source: String, CaseIterable, Hashable {\n        case git = \"Git\"\n        case local = \"Local\"\n\n        var label: String { rawValue }\n\n        var systemImage: String {\n            switch self {\n            case .git: return \"arrow.triangle.branch\"\n            case .local: return \"internaldrive\"\n            }\n        }\n\n        var tint: Color {\n            switch self {\n            case .git: return .blue\n            case .local: return .orange\n            }\n        }\n    }\n\n    struct DiffSummary: Hashable {\n        var added: Int\n        var deleted: Int\n\n        var isEmpty: Bool { added == 0 && deleted == 0 }\n\n        var text: String {\n            // VS Code-ish compact summary: +12 −4\n            let plus = added > 0 ? \"+\\(added)\" : nil\n            let minus = deleted > 0 ? \"−\\(deleted)\" : nil\n            return [plus, minus].compactMap { $0 }.joined(separator: \" \")\n        }\n    }\n\n    let id: UUID\n    let timestamp: Date\n    let source: Source\n    /// \"Author\" for git; \"Device/User\" for local saves.\n    let author: String\n    /// Short change description (commit message, save reason, etc.)\n    let message: String\n    /// Optional diff summary if available.\n    let diff: DiffSummary?\n\n    init(\n        id: UUID = UUID(),\n        timestamp: Date,\n        source: Source,\n        author: String,\n        message: String,\n        diff: DiffSummary? = nil\n    ) {\n        self.id = id\n        self.timestamp = timestamp\n        self.source = source\n        self.author = author\n        self.message = message\n        self.diff = diff\n    }\n}\n\n// MARK: - Provider (structure for future Git integration)\n\n/// Abstraction point for later wiring to real Git history / local save tracking.\nprotocol TimelineProviding {\n    /// - Parameter filePath: A workspace-relative file path (or identifier) to fetch history for.\n    func timelineEntries(for filePath: String?) async -> [TimelineEntry]\n}\n\n/// Mock provider used for now.\nstruct MockTimelineProvider: TimelineProviding {\n    func timelineEntries(for filePath: String?) async -> [TimelineEntry] {\n        let now = Date()\n        // NOTE: Mock data only. Replace with real Git + local-save sources later.\n        return [\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 5),\n                source: .local,\n                author: \"This iPad\",\n                message: \"Saved\",\n                diff: .init(added: 2, deleted: 0)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 22),\n                source: .local,\n                author: \"This iPad\",\n                message: \"Auto Save\",\n                diff: .init(added: 0, deleted: 1)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 3),\n                source: .git,\n                author: \"alex\",\n                message: \"Fix layout for timeline rows\",\n                diff: .init(added: 18, deleted: 6)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 8),\n                source: .git,\n                author: \"alex\",\n                message: \"Add Timeline panel skeleton\",\n                diff: .init(added: 124, deleted: 0)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 24),\n                source: .git,\n                author: \"sam\",\n                message: \"Initial commit\",\n                diff: .init(added: 980, deleted: 0)\n            )\n        ]\n    }\n}\n\n// MARK: - View Model\n\n@MainActor\nfinal class TimelineViewModel: ObservableObject {\n    enum SourceFilter: String, CaseIterable, Identifiable {\n        case all = \"All\"\n        case git = \"Git\"\n        case local = \"Local\"\n\n        var id: String { rawValue }\n\n        func includes(_ source: TimelineEntry.Source) -> Bool {\n            switch self {\n            case .all: return true\n            case .git: return source == .git\n            case .local: return source == .local\n            }\n        }\n    }\n\n    @Published var filter: SourceFilter = .all\n    @Published private(set) var entries: [TimelineEntry] = []\n    @Published private(set) var isLoading: Bool = false\n\n    private let provider: any TimelineProviding\n    private let filePath: String?\n\n    init(filePath: String? = nil, provider: any TimelineProviding = MockTimelineProvider()) {\n        self.filePath = filePath\n        self.provider = provider\n    }\n\n    var filteredEntries: [TimelineEntry] {\n        entries\n            .filter { filter.includes($0.source) }\n            .sorted { $0.timestamp > $1.timestamp }\n    }\n\n    func load() async {\n        isLoading = true\n        defer { isLoading = false }\n        entries = await provider.timelineEntries(for: filePath)\n    }\n}\n\n// MARK: - Timeline View\n\n/// VS Code-style Timeline panel: shows file history and allows filtering by source.\nstruct TimelineView: View {\n    @StateObject private var viewModel: TimelineViewModel\n\n    init(filePath: String? = nil, provider: any TimelineProviding = MockTimelineProvider()) {\n        _viewModel = StateObject(wrappedValue: TimelineViewModel(filePath: filePath, provider: provider))\n    }\n\n    var body: some View {\n        VStack(spacing: 0) {\n            header\n            Divider()\n\n            if viewModel.isLoading {\n                loading\n            } else if viewModel.filteredEntries.isEmpty {\n                empty\n            } else {\n                list\n            }\n        }\n        .task {\n            await viewModel.load()\n        }\n    }\n\n    // MARK: Header\n\n    private var header: some View {\n        HStack(spacing: 12) {\n            Text(\"Timeline\")\n                .font(.headline)\n\n            Spacer()\n\n            Picker(\"Source\", selection: $viewModel.filter) {\n                ForEach(TimelineViewModel.SourceFilter.allCases) { filter in\n                    Text(filter.rawValue).tag(filter)\n                }\n            }\n            .pickerStyle(.segmented)\n            .frame(maxWidth: 320)\n        }\n        .padding(.horizontal, 12)\n        .padding(.vertical, 10)\n        .background(Color(.secondarySystemBackground))\n    }\n\n    // MARK: Content\n\n    private var list: some View {\n        List {\n            ForEach(viewModel.filteredEntries) { entry in\n                TimelineRow(entry: entry)\n                    .listRowInsets(EdgeInsets(top: 8, leading: 12, bottom: 8, trailing: 12))\n            }\n        }\n        .listStyle(.plain)\n    }\n\n    private var loading: some View {\n        VStack(spacing: 12) {\n            ProgressView()\n            Text(\"Loading history…\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(20)\n        .background(Color(.systemBackground))\n    }\n\n    private var empty: some View {\n        VStack(alignment: .center, spacing: 10) {\n            Text(\"No timeline entries\")\n                .font(.headline)\n            Text(\"Try changing the filter or select a file with history.\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(20)\n        .background(Color(.systemBackground))\n    }\n}\n\n// MARK: - Row\n\nprivate struct TimelineRow: View {\n    let entry: TimelineEntry\n\n    var body: some View {\n        HStack(alignment: .top, spacing: 10) {\n            sourceIcon\n\n            VStack(alignment: .leading, spacing: 6) {\n                HStack(alignment: .firstTextBaseline, spacing: 8) {\n                    Text(entry.message)\n                        .font(.body)\n                        .foregroundStyle(.primary)\n                        .lineLimit(2)\n\n                    Spacer(minLength: 8)\n\n                    if let diff = entry.diff, !diff.isEmpty {\n                        DiffBadge(diff: diff)\n                    }\n                }\n\n                HStack(spacing: 8) {\n                    Text(entry.author)\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                        .lineLimit(1)\n\n                    Text(\"•\")\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n\n                    Text(Self.timestampFormatter.string(from: entry.timestamp))\n                        .font(.caption.monospacedDigit())\n                        .foregroundStyle(.secondary)\n                        .lineLimit(1)\n\n                    Spacer(minLength: 0)\n\n                    Text(entry.source.label)\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                }\n            }\n        }\n        .padding(.vertical, 2)\n        .contentShape(Rectangle())\n        // Future: selection / open diff action hook.\n    }\n\n    private var sourceIcon: some View {\n        ZStack {\n            RoundedRectangle(cornerRadius: 8, style: .continuous)\n                .fill(entry.source.tint.opacity(0.12))\n                .frame(width: 28, height: 28)\n\n            Image(systemName: entry.source.systemImage)\n                .font(.system(size: 13, weight: .semibold))\n                .foregroundStyle(entry.source.tint)\n        }\n        .padding(.top, 2)\n    }\n\n    private static let timestampFormatter: DateFormatter = {\n        let df = DateFormatter()\n        df.dateStyle = .medium\n        df.timeStyle = .short\n        return df\n    }()\n}\n\nprivate struct DiffBadge: View {\n    let diff: TimelineEntry.DiffSummary\n\n    var body: some View {\n        Text(diff.text)\n            .font(.caption.monospacedDigit())\n            .foregroundStyle(.secondary)\n            .padding(.horizontal, 8)\n            .padding(.vertical, 4)\n            .background(\n                RoundedRectangle(cornerRadius: 8, style: .continuous)\n                    .fill(Color(.tertiarySystemFill))\n            )\n            .accessibilityLabel(accessibilityText)\n    }\n\n    private var accessibilityText: String {\n        var parts: [String] = []\n        if diff.added > 0 { parts.append(\"\\(diff.added) added\") }\n        if diff.deleted > 0 { parts.append(\"\\(diff.deleted) deleted\") }\n        return parts.isEmpty ? \"No changes\" : parts.joined(separator: \", \")\n    }\n}\n\n// MARK: - Previews\n\nstruct TimelineView_Previews: PreviewProvider {\n    static var previews: some View {\n        TimelineView()\n            .frame(width: 420, height: 600)\n    }\n}\n"} 
>>>END

>>>TOOL create_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","content":"import SwiftUI\nimport Foundation\n\n// MARK: - Timeline Models\n\n/// Represents a single change in a file's history (Git commit, local save, etc.).\nstruct TimelineEntry: Identifiable, Hashable {\n    enum Source: String, CaseIterable, Hashable {\n        case git = \"Git\"\n        case local = \"Local\"\n\n        var label: String { rawValue }\n\n        var systemImage: String {\n            switch self {\n            case .git: return \"arrow.triangle.branch\"\n            case .local: return \"internaldrive\"\n            }\n        }\n\n        var tint: Color {\n            switch self {\n            case .git: return .blue\n            case .local: return .orange\n            }\n        }\n    }\n\n    struct DiffSummary: Hashable {\n        var added: Int\n        var deleted: Int\n\n        var isEmpty: Bool { added == 0 && deleted == 0 }\n\n        var text: String {\n            // VS Code-ish compact summary: +12 −4\n            let plus = added > 0 ? \"+\\(added)\" : nil\n            let minus = deleted > 0 ? \"−\\(deleted)\" : nil\n            return [plus, minus].compactMap { $0 }.joined(separator: \" \")\n        }\n    }\n\n    let id: UUID\n    let timestamp: Date\n    let source: Source\n    /// \"Author\" for git; \"Device/User\" for local saves.\n    let author: String\n    /// Short change description (commit message, save reason, etc.)\n    let message: String\n    /// Optional diff summary if available.\n    let diff: DiffSummary?\n\n    init(\n        id: UUID = UUID(),\n        timestamp: Date,\n        source: Source,\n        author: String,\n        message: String,\n        diff: DiffSummary? = nil\n    ) {\n        self.id = id\n        self.timestamp = timestamp\n        self.source = source\n        self.author = author\n        self.message = message\n        self.diff = diff\n    }\n}\n\n// MARK: - Provider (structure for future Git integration)\n\n/// Abstraction point for later wiring to real Git history / local save tracking.\nprotocol TimelineProviding {\n    /// - Parameter filePath: A workspace-relative file path (or identifier) to fetch history for.\n    func timelineEntries(for filePath: String?) async -> [TimelineEntry]\n}\n\n/// Mock provider used for now.\nstruct MockTimelineProvider: TimelineProviding {\n    func timelineEntries(for filePath: String?) async -> [TimelineEntry] {\n        let now = Date()\n        // NOTE: Mock data only. Replace with real Git + local-save sources later.\n        return [\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 5),\n                source: .local,\n                author: \"This iPad\",\n                message: \"Saved\",\n                diff: .init(added: 2, deleted: 0)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 22),\n                source: .local,\n                author: \"This iPad\",\n                message: \"Auto Save\",\n                diff: .init(added: 0, deleted: 1)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 3),\n                source: .git,\n                author: \"alex\",\n                message: \"Fix layout for timeline rows\",\n                diff: .init(added: 18, deleted: 6)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 8),\n                source: .git,\n                author: \"alex\",\n                message: \"Add Timeline panel skeleton\",\n                diff: .init(added: 124, deleted: 0)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 24),\n                source: .git,\n                author: \"sam\",\n                message: \"Initial commit\",\n                diff: .init(added: 980, deleted: 0)\n            )\n        ]\n    }\n}\n\n// MARK: - View Model\n\n@MainActor\nfinal class TimelineViewModel: ObservableObject {\n    enum SourceFilter: String, CaseIterable, Identifiable {\n        case all = \"All\"\n        case git = \"Git\"\n        case local = \"Local\"\n\n        var id: String { rawValue }\n\n        func includes(_ source: TimelineEntry.Source) -> Bool {\n            switch self {\n            case .all: return true\n            case .git: return source == .git\n            case .local: return source == .local\n            }\n        }\n    }\n\n    @Published var filter: SourceFilter = .all\n    @Published private(set) var entries: [TimelineEntry] = []\n    @Published private(set) var isLoading: Bool = false\n\n    private let provider: any TimelineProviding\n    private let filePath: String?\n\n    init(filePath: String? = nil, provider: any TimelineProviding = MockTimelineProvider()) {\n        self.filePath = filePath\n        self.provider = provider\n    }\n\n    var filteredEntries: [TimelineEntry] {\n        entries\n            .filter { filter.includes($0.source) }\n            .sorted { $0.timestamp > $1.timestamp }\n    }\n\n    func load() async {\n        isLoading = true\n        defer { isLoading = false }\n        entries = await provider.timelineEntries(for: filePath)\n    }\n}\n\n// MARK: - Timeline View\n\n/// VS Code-style Timeline panel: shows file history and allows filtering by source.\nstruct TimelineView: View {\n    @StateObject private var viewModel: TimelineViewModel\n\n    init(filePath: String? = nil, provider: any TimelineProviding = MockTimelineProvider()) {\n        _viewModel = StateObject(wrappedValue: TimelineViewModel(filePath: filePath, provider: provider))\n    }\n\n    var body: some View {\n        VStack(spacing: 0) {\n            header\n            Divider()\n\n            if viewModel.isLoading {\n                loading\n            } else if viewModel.filteredEntries.isEmpty {\n                empty\n            } else {\n                list\n            }\n        }\n        .task {\n            await viewModel.load()\n        }\n    }\n\n    // MARK: Header\n\n    private var header: some View {\n        HStack(spacing: 12) {\n            Text(\"Timeline\")\n                .font(.headline)\n\n            Spacer()\n\n            Picker(\"Source\", selection: $viewModel.filter) {\n                ForEach(TimelineViewModel.SourceFilter.allCases) { filter in\n                    Text(filter.rawValue).tag(filter)\n                }\n            }\n            .pickerStyle(.segmented)\n            .frame(maxWidth: 320)\n        }\n        .padding(.horizontal, 12)\n        .padding(.vertical, 10)\n        .background(Color(.secondarySystemBackground))\n    }\n\n    // MARK: Content\n\n    private var list: some View {\n        List {\n            ForEach(viewModel.filteredEntries) { entry in\n                TimelineRow(entry: entry)\n                    .listRowInsets(EdgeInsets(top: 8, leading: 12, bottom: 8, trailing: 12))\n            }\n        }\n        .listStyle(.plain)\n    }\n\n    private var loading: some View {\n        VStack(spacing: 12) {\n            ProgressView()\n            Text(\"Loading history…\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(20)\n        .background(Color(.systemBackground))\n    }\n\n    private var empty: some View {\n        VStack(alignment: .center, spacing: 10) {\n            Text(\"No timeline entries\")\n                .font(.headline)\n            Text(\"Try changing the filter or select a file with history.\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(20)\n        .background(Color(.systemBackground))\n    }\n}\n\n// MARK: - Row\n\nprivate struct TimelineRow: View {\n    let entry: TimelineEntry\n\n    var body: some View {\n        HStack(alignment: .top, spacing: 10) {\n            sourceIcon\n\n            VStack(alignment: .leading, spacing: 6) {\n                HStack(alignment: .firstTextBaseline, spacing: 8) {\n                    Text(entry.message)\n                        .font(.body)\n                        .foregroundStyle(.primary)\n                        .lineLimit(2)\n\n                    Spacer(minLength: 8)\n\n                    if let diff = entry.diff, !diff.isEmpty {\n                        DiffBadge(diff: diff)\n                    }\n                }\n\n                HStack(spacing: 8) {\n                    Text(entry.author)\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                        .lineLimit(1)\n\n                    Text(\"•\")\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n\n                    Text(Self.timestampFormatter.string(from: entry.timestamp))\n                        .font(.caption.monospacedDigit())\n                        .foregroundStyle(.secondary)\n                        .lineLimit(1)\n\n                    Spacer(minLength: 0)\n\n                    Text(entry.source.label)\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                }\n            }\n        }\n        .padding(.vertical, 2)\n        .contentShape(Rectangle())\n        // Future: selection / open diff action hook.\n    }\n\n    private var sourceIcon: some View {\n        ZStack {\n            RoundedRectangle(cornerRadius: 8, style: .continuous)\n                .fill(entry.source.tint.opacity(0.12))\n                .frame(width: 28, height: 28)\n\n            Image(systemName: entry.source.systemImage)\n                .font(.system(size: 13, weight: .semibold))\n                .foregroundStyle(entry.source.tint)\n        }\n        .padding(.top, 2)\n    }\n\n    private static let timestampFormatter: DateFormatter = {\n        let df = DateFormatter()\n        df.dateStyle = .medium\n        df.timeStyle = .short\n        return df\n    }()\n}\n\nprivate struct DiffBadge: View {\n    let diff: TimelineEntry.DiffSummary\n\n    var body: some View {\n        Text(diff.text)\n            .font(.caption.monospacedDigit())\n            .foregroundStyle(.secondary)\n            .padding(.horizontal, 8)\n            .padding(.vertical, 4)\n            .background(\n                RoundedRectangle(cornerRadius: 8, style: .continuous)\n                    .fill(Color(.tertiarySystemFill))\n            )\n            .accessibilityLabel(accessibilityText)\n    }\n\n    private var accessibilityText: String {\n        var parts: [String] = []\n        if diff.added > 0 { parts.append(\"\\(diff.added) added\") }\n        if diff.deleted > 0 { parts.append(\"\\(diff.deleted) deleted\") }\n        return parts.isEmpty ? \"No changes\" : parts.joined(separator: \", \")\n    }\n}\n\n// MARK: - Previews\n\nstruct TimelineView_Previews: PreviewProvider {\n    static var previews: some View {\n        TimelineView()\n            .frame(width: 420, height: 600)\n    }\n}\n","overwrite":true} 
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":220}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":12}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":6}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":5}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":15}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":8}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":6}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":15}
>>>END

>>>TOOL create_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","overwrite":true,"content":"import SwiftUI\nimport Foundation\n\n// MARK: - Timeline Models\n\n/// Represents a single change in a file's history (Git commit, local save, etc.).\nstruct TimelineEntry: Identifiable, Hashable {\n    enum Source: String, CaseIterable, Hashable {\n        case git = \"Git\"\n        case local = \"Local\"\n\n        var label: String { rawValue }\n\n        var systemImage: String {\n            switch self {\n            case .git: return \"arrow.triangle.branch\"\n            case .local: return \"internaldrive\"\n            }\n        }\n\n        var tint: Color {\n            switch self {\n            case .git: return .blue\n            case .local: return .orange\n            }\n        }\n    }\n\n    struct DiffSummary: Hashable {\n        var added: Int\n        var deleted: Int\n\n        var isEmpty: Bool { added == 0 && deleted == 0 }\n\n        var text: String {\n            // VS Code-ish compact summary: +12 −4\n            let plus = added > 0 ? \"+\\(added)\" : nil\n            let minus = deleted > 0 ? \"−\\(deleted)\" : nil\n            return [plus, minus].compactMap { $0 }.joined(separator: \" \")\n        }\n    }\n\n    let id: UUID\n    let timestamp: Date\n    let source: Source\n    /// \"Author\" for git; \"Device/User\" for local saves.\n    let author: String\n    /// Short change description (commit message, save reason, etc.)\n    let message: String\n    /// Optional diff summary if available.\n    let diff: DiffSummary?\n\n    init(\n        id: UUID = UUID(),\n        timestamp: Date,\n        source: Source,\n        author: String,\n        message: String,\n        diff: DiffSummary? = nil\n    ) {\n        self.id = id\n        self.timestamp = timestamp\n        self.source = source\n        self.author = author\n        self.message = message\n        self.diff = diff\n    }\n}\n\n// MARK: - Provider (structure for future Git integration)\n\n/// Abstraction point for later wiring to real Git history / local save tracking.\nprotocol TimelineProviding {\n    /// - Parameter filePath: A workspace-relative file path (or identifier) to fetch history for.\n    func timelineEntries(for filePath: String?) async -> [TimelineEntry]\n}\n\n/// Mock provider used for now.\nstruct MockTimelineProvider: TimelineProviding {\n    func timelineEntries(for filePath: String?) async -> [TimelineEntry] {\n        let now = Date()\n        // NOTE: Mock data only. Replace with real Git + local-save sources later.\n        return [\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 5),\n                source: .local,\n                author: \"This iPad\",\n                message: \"Saved\",\n                diff: .init(added: 2, deleted: 0)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 22),\n                source: .local,\n                author: \"This iPad\",\n                message: \"Auto Save\",\n                diff: .init(added: 0, deleted: 1)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 3),\n                source: .git,\n                author: \"alex\",\n                message: \"Fix layout for timeline rows\",\n                diff: .init(added: 18, deleted: 6)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 8),\n                source: .git,\n                author: \"alex\",\n                message: \"Add Timeline panel skeleton\",\n                diff: .init(added: 124, deleted: 0)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 24),\n                source: .git,\n                author: \"sam\",\n                message: \"Initial commit\",\n                diff: .init(added: 980, deleted: 0)\n            )\n        ]\n    }\n}\n\n// MARK: - View Model\n\n@MainActor\nfinal class TimelineViewModel: ObservableObject {\n    enum SourceFilter: String, CaseIterable, Identifiable {\n        case all = \"All\"\n        case git = \"Git\"\n        case local = \"Local\"\n\n        var id: String { rawValue }\n\n        func includes(_ source: TimelineEntry.Source) -> Bool {\n            switch self {\n            case .all: return true\n            case .git: return source == .git\n            case .local: return source == .local\n            }\n        }\n    }\n\n    @Published var filter: SourceFilter = .all\n    @Published private(set) var entries: [TimelineEntry] = []\n    @Published private(set) var isLoading: Bool = false\n\n    private let provider: any TimelineProviding\n    private let filePath: String?\n\n    init(filePath: String? = nil, provider: any TimelineProviding = MockTimelineProvider()) {\n        self.filePath = filePath\n        self.provider = provider\n    }\n\n    var filteredEntries: [TimelineEntry] {\n        entries\n            .filter { filter.includes($0.source) }\n            .sorted { $0.timestamp > $1.timestamp }\n    }\n\n    func load() async {\n        isLoading = true\n        defer { isLoading = false }\n        entries = await provider.timelineEntries(for: filePath)\n    }\n}\n\n// MARK: - Timeline View\n\n/// VS Code-style Timeline panel: shows file history and allows filtering by source.\nstruct TimelineView: View {\n    @StateObject private var viewModel: TimelineViewModel\n\n    init(filePath: String? = nil, provider: any TimelineProviding = MockTimelineProvider()) {\n        _viewModel = StateObject(wrappedValue: TimelineViewModel(filePath: filePath, provider: provider))\n    }\n\n    var body: some View {\n        VStack(spacing: 0) {\n            header\n            Divider()\n\n            if viewModel.isLoading {\n                loading\n            } else if viewModel.filteredEntries.isEmpty {\n                empty\n            } else {\n                list\n            }\n        }\n        .task {\n            await viewModel.load()\n        }\n    }\n\n    // MARK: Header\n\n    private var header: some View {\n        HStack(spacing: 12) {\n            Text(\"Timeline\")\n                .font(.headline)\n\n            Spacer()\n\n            Picker(\"Source\", selection: $viewModel.filter) {\n                ForEach(TimelineViewModel.SourceFilter.allCases) { filter in\n                    Text(filter.rawValue).tag(filter)\n                }\n            }\n            .pickerStyle(.segmented)\n            .frame(maxWidth: 320)\n        }\n        .padding(.horizontal, 12)\n        .padding(.vertical, 10)\n        .background(Color(.secondarySystemBackground))\n    }\n\n    // MARK: Content\n\n    private var list: some View {\n        List {\n            ForEach(viewModel.filteredEntries) { entry in\n                TimelineRow(entry: entry)\n                    .listRowInsets(EdgeInsets(top: 8, leading: 12, bottom: 8, trailing: 12))\n            }\n        }\n        .listStyle(.plain)\n    }\n\n    private var loading: some View {\n        VStack(spacing: 12) {\n            ProgressView()\n            Text(\"Loading history…\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(20)\n        .background(Color(.systemBackground))\n    }\n\n    private var empty: some View {\n        VStack(alignment: .center, spacing: 10) {\n            Text(\"No timeline entries\")\n                .font(.headline)\n            Text(\"Try changing the filter or select a file with history.\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(20)\n        .background(Color(.systemBackground))\n    }\n}\n\n// MARK: - Row\n\nprivate struct TimelineRow: View {\n    let entry: TimelineEntry\n\n    var body: some View {\n        HStack(alignment: .top, spacing: 10) {\n            sourceIcon\n\n            VStack(alignment: .leading, spacing: 6) {\n                HStack(alignment: .firstTextBaseline, spacing: 8) {\n                    Text(entry.message)\n                        .font(.body)\n                        .foregroundStyle(.primary)\n                        .lineLimit(2)\n\n                    Spacer(minLength: 8)\n\n                    if let diff = entry.diff, !diff.isEmpty {\n                        DiffBadge(diff: diff)\n                    }\n                }\n\n                HStack(spacing: 8) {\n                    Text(entry.author)\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                        .lineLimit(1)\n\n                    Text(\"•\")\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n\n                    Text(Self.timestampFormatter.string(from: entry.timestamp))\n                        .font(.caption.monospacedDigit())\n                        .foregroundStyle(.secondary)\n                        .lineLimit(1)\n\n                    Spacer(minLength: 0)\n\n                    Text(entry.source.label)\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                }\n            }\n        }\n        .padding(.vertical, 2)\n        .contentShape(Rectangle())\n        // Future: selection / open diff action hook.\n    }\n\n    private var sourceIcon: some View {\n        ZStack {\n            RoundedRectangle(cornerRadius: 8, style: .continuous)\n                .fill(entry.source.tint.opacity(0.12))\n                .frame(width: 28, height: 28)\n\n            Image(systemName: entry.source.systemImage)\n                .font(.system(size: 13, weight: .semibold))\n                .foregroundStyle(entry.source.tint)\n        }\n        .padding(.top, 2)\n    }\n\n    private static let timestampFormatter: DateFormatter = {\n        let df = DateFormatter()\n        df.dateStyle = .medium\n        df.timeStyle = .short\n        return df\n    }()\n}\n\nprivate struct DiffBadge: View {\n    let diff: TimelineEntry.DiffSummary\n\n    var body: some View {\n        Text(diff.text)\n            .font(.caption.monospacedDigit())\n            .foregroundStyle(.secondary)\n            .padding(.horizontal, 8)\n            .padding(.vertical, 4)\n            .background(\n                RoundedRectangle(cornerRadius: 8, style: .continuous)\n                    .fill(Color(.tertiarySystemFill))\n            )\n            .accessibilityLabel(accessibilityText)\n    }\n\n    private var accessibilityText: String {\n        var parts: [String] = []\n        if diff.added > 0 { parts.append(\"\\(diff.added) added\") }\n        if diff.deleted > 0 { parts.append(\"\\(diff.deleted) deleted\") }\n        return parts.isEmpty ? \"No changes\" : parts.joined(separator: \", \")\n    }\n}\n\n// MARK: - Previews\n\nstruct TimelineView_Previews: PreviewProvider {\n    static var previews: some View {\n        TimelineView()\n            .frame(width: 420, height: 600)\n    }\n}\n"} 
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":20}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":8}
>>>END

>>>TOOL create_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","overwrite":true,"content":"import SwiftUI\nimport Foundation\n\n// MARK: - Timeline Models\n\n/// Represents a single change in a file's history (Git commit, local save, etc.).\nstruct TimelineEntry: Identifiable, Hashable {\n    enum Source: String, CaseIterable, Hashable {\n        case git = \"Git\"\n        case local = \"Local\"\n\n        var label: String { rawValue }\n\n        var systemImage: String {\n            switch self {\n            case .git: return \"arrow.triangle.branch\"\n            case .local: return \"internaldrive\"\n            }\n        }\n\n        var tint: Color {\n            switch self {\n            case .git: return .blue\n            case .local: return .orange\n            }\n        }\n    }\n\n    struct DiffSummary: Hashable {\n        var added: Int\n        var deleted: Int\n\n        var isEmpty: Bool { added == 0 && deleted == 0 }\n\n        var text: String {\n            // VS Code-ish compact summary: +12 −4\n            let plus = added > 0 ? \"+\\(added)\" : nil\n            let minus = deleted > 0 ? \"−\\(deleted)\" : nil\n            return [plus, minus].compactMap { $0 }.joined(separator: \" \")\n        }\n    }\n\n    let id: UUID\n    let timestamp: Date\n    let source: Source\n    /// \"Author\" for git; \"Device/User\" for local saves.\n    let author: String\n    /// Short change description (commit message, save reason, etc.)\n    let message: String\n    /// Optional diff summary if available.\n    let diff: DiffSummary?\n\n    init(\n        id: UUID = UUID(),\n        timestamp: Date,\n        source: Source,\n        author: String,\n        message: String,\n        diff: DiffSummary? = nil\n    ) {\n        self.id = id\n        self.timestamp = timestamp\n        self.source = source\n        self.author = author\n        self.message = message\n        self.diff = diff\n    }\n}\n\n// MARK: - Provider (structure for future Git integration)\n\n/// Abstraction point for later wiring to real Git history / local save tracking.\nprotocol TimelineProviding {\n    /// - Parameter filePath: A workspace-relative file path (or identifier) to fetch history for.\n    func timelineEntries(for filePath: String?) async -> [TimelineEntry]\n}\n\n/// Mock provider used for now.\nstruct MockTimelineProvider: TimelineProviding {\n    func timelineEntries(for filePath: String?) async -> [TimelineEntry] {\n        let now = Date()\n        // NOTE: Mock data only. Replace with real Git + local-save sources later.\n        return [\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 5),\n                source: .local,\n                author: \"This iPad\",\n                message: \"Saved\",\n                diff: .init(added: 2, deleted: 0)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 22),\n                source: .local,\n                author: \"This iPad\",\n                message: \"Auto Save\",\n                diff: .init(added: 0, deleted: 1)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 3),\n                source: .git,\n                author: \"alex\",\n                message: \"Fix layout for timeline rows\",\n                diff: .init(added: 18, deleted: 6)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 8),\n                source: .git,\n                author: \"alex\",\n                message: \"Add Timeline panel skeleton\",\n                diff: .init(added: 124, deleted: 0)\n            ),\n            TimelineEntry(\n                timestamp: now.addingTimeInterval(-60 * 60 * 24),\n                source: .git,\n                author: \"sam\",\n                message: \"Initial commit\",\n                diff: .init(added: 980, deleted: 0)\n            )\n        ]\n    }\n}\n\n// MARK: - View Model\n\n@MainActor\nfinal class TimelineViewModel: ObservableObject {\n    enum SourceFilter: String, CaseIterable, Identifiable {\n        case all = \"All\"\n        case git = \"Git\"\n        case local = \"Local\"\n\n        var id: String { rawValue }\n\n        func includes(_ source: TimelineEntry.Source) -> Bool {\n            switch self {\n            case .all: return true\n            case .git: return source == .git\n            case .local: return source == .local\n            }\n        }\n    }\n\n    @Published var filter: SourceFilter = .all\n    @Published private(set) var entries: [TimelineEntry] = []\n    @Published private(set) var isLoading: Bool = false\n\n    private let provider: any TimelineProviding\n    private let filePath: String?\n\n    init(filePath: String? = nil, provider: any TimelineProviding = MockTimelineProvider()) {\n        self.filePath = filePath\n        self.provider = provider\n    }\n\n    var filteredEntries: [TimelineEntry] {\n        entries\n            .filter { filter.includes($0.source) }\n            .sorted { $0.timestamp > $1.timestamp }\n    }\n\n    func load() async {\n        isLoading = true\n        defer { isLoading = false }\n        entries = await provider.timelineEntries(for: filePath)\n    }\n}\n\n// MARK: - Timeline View\n\n/// VS Code-style Timeline panel: shows file history and allows filtering by source.\nstruct TimelineView: View {\n    @StateObject private var viewModel: TimelineViewModel\n\n    init(filePath: String? = nil, provider: any TimelineProviding = MockTimelineProvider()) {\n        _viewModel = StateObject(wrappedValue: TimelineViewModel(filePath: filePath, provider: provider))\n    }\n\n    var body: some View {\n        VStack(spacing: 0) {\n            header\n            Divider()\n\n            if viewModel.isLoading {\n                loading\n            } else if viewModel.filteredEntries.isEmpty {\n                empty\n            } else {\n                list\n            }\n        }\n        .task {\n            await viewModel.load()\n        }\n    }\n\n    // MARK: Header\n\n    private var header: some View {\n        HStack(spacing: 12) {\n            Text(\"Timeline\")\n                .font(.headline)\n\n            Spacer()\n\n            Picker(\"Source\", selection: $viewModel.filter) {\n                ForEach(TimelineViewModel.SourceFilter.allCases) { filter in\n                    Text(filter.rawValue).tag(filter)\n                }\n            }\n            .pickerStyle(.segmented)\n            .frame(maxWidth: 320)\n        }\n        .padding(.horizontal, 12)\n        .padding(.vertical, 10)\n        .background(Color(.secondarySystemBackground))\n    }\n\n    // MARK: Content\n\n    private var list: some View {\n        List {\n            ForEach(viewModel.filteredEntries) { entry in\n                TimelineRow(entry: entry)\n                    .listRowInsets(EdgeInsets(top: 8, leading: 12, bottom: 8, trailing: 12))\n            }\n        }\n        .listStyle(.plain)\n    }\n\n    private var loading: some View {\n        VStack(spacing: 12) {\n            ProgressView()\n            Text(\"Loading history…\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(20)\n        .background(Color(.systemBackground))\n    }\n\n    private var empty: some View {\n        VStack(alignment: .center, spacing: 10) {\n            Text(\"No timeline entries\")\n                .font(.headline)\n            Text(\"Try changing the filter or select a file with history.\")\n                .font(.subheadline)\n                .foregroundStyle(.secondary)\n        }\n        .frame(maxWidth: .infinity, maxHeight: .infinity)\n        .padding(20)\n        .background(Color(.systemBackground))\n    }\n}\n\n// MARK: - Row\n\nprivate struct TimelineRow: View {\n    let entry: TimelineEntry\n\n    var body: some View {\n        HStack(alignment: .top, spacing: 10) {\n            sourceIcon\n\n            VStack(alignment: .leading, spacing: 6) {\n                HStack(alignment: .firstTextBaseline, spacing: 8) {\n                    Text(entry.message)\n                        .font(.body)\n                        .foregroundStyle(.primary)\n                        .lineLimit(2)\n\n                    Spacer(minLength: 8)\n\n                    if let diff = entry.diff, !diff.isEmpty {\n                        DiffBadge(diff: diff)\n                    }\n                }\n\n                HStack(spacing: 8) {\n                    Text(entry.author)\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                        .lineLimit(1)\n\n                    Text(\"•\")\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n\n                    Text(Self.timestampFormatter.string(from: entry.timestamp))\n                        .font(.caption.monospacedDigit())\n                        .foregroundStyle(.secondary)\n                        .lineLimit(1)\n\n                    Spacer(minLength: 0)\n\n                    Text(entry.source.label)\n                        .font(.caption)\n                        .foregroundStyle(.secondary)\n                }\n            }\n        }\n        .padding(.vertical, 2)\n        .contentShape(Rectangle())\n        // Future: selection / open diff action hook.\n    }\n\n    private var sourceIcon: some View {\n        ZStack {\n            RoundedRectangle(cornerRadius: 8, style: .continuous)\n                .fill(entry.source.tint.opacity(0.12))\n                .frame(width: 28, height: 28)\n\n            Image(systemName: entry.source.systemImage)\n                .font(.system(size: 13, weight: .semibold))\n                .foregroundStyle(entry.source.tint)\n        }\n        .padding(.top, 2)\n    }\n\n    private static let timestampFormatter: DateFormatter = {\n        let df = DateFormatter()\n        df.dateStyle = .medium\n        df.timeStyle = .short\n        return df\n    }()\n}\n\nprivate struct DiffBadge: View {\n    let diff: TimelineEntry.DiffSummary\n\n    var body: some View {\n        Text(diff.text)\n            .font(.caption.monospacedDigit())\n            .foregroundStyle(.secondary)\n            .padding(.horizontal, 8)\n            .padding(.vertical, 4)\n            .background(\n                RoundedRectangle(cornerRadius: 8, style: .continuous)\n                    .fill(Color(.tertiarySystemFill))\n            )\n            .accessibilityLabel(accessibilityText)\n    }\n\n    private var accessibilityText: String {\n        var parts: [String] = []\n        if diff.added > 0 { parts.append(\"\\(diff.added) added\") }\n        if diff.deleted > 0 { parts.append(\"\\(diff.deleted) deleted\") }\n        return parts.isEmpty ? \"No changes\" : parts.joined(separator: \", \")\n    }\n}\n\n// MARK: - Previews\n\nstruct TimelineView_Previews: PreviewProvider {\n    static var previews: some View {\n        TimelineView()\n            .frame(width: 420, height: 600)\n    }\n}\n"} 
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":25}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":6}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":10}
>>>END

>>>TOOL search
{"query":"import SwiftUI", "glob":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift"}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift","start_line":1,"end_line":420}
>>>END

>>>REPORT
Implemented a VS Code-style Timeline panel in `VSCodeiPadOS/VSCodeiPadOS/Views/Panels/TimelineView.swift` with mock history data and an abstraction layer for future real Git integration.

Evidence (file + line ranges from tool output):
- Timeline entry model includes required fields: timestamp, author, source (Git/Local), message/description, and diff summary indicator:
  - `TimelineEntry` with `timestamp`, `source`, `author`, `message`, `diff` (lines 6-67).
  - `DiffSummary` provides compact “+added −deleted” text (lines 29-41).
- Structure for future git integration:
  - `TimelineProviding` protocol with `timelineEntries(for:) async` (lines 73-76).
  - `MockTimelineProvider` supplies mock Git + Local entries (lines 78-121).
- Filtering by source (All / Git / Local):
  - `TimelineViewModel.SourceFilter` + `includes(_:)` (lines 127-141).
  - UI filter control uses a segmented `Picker` bound to `viewModel.filter` (lines 205-212).
  - `filteredEntries` applies source filter and sorts newest-first (lines 155-159).
- UI shows list of changes with timestamp, author/source, description, diff indicator:
  - `TimelineView` renders list / loading / empty states (lines 178-254).
  - `TimelineRow` displays message, author, formatted timestamp, source label, and `DiffBadge` when diff is non-empty (lines 261-305, 274-277, 279-298).
  - `DiffBadge` renders diff indicator text (lines 328-350).
- Preview included:
  - `TimelineView_Previews` (lines 354-359).
>>>END
