# Agent: test-nav-10
**Status:** done
**Tokens:** 15,154
**Cost:** $0.0000
**Time:** 2026-02-09T18:53:30.252Z

## Task
Create UI test for activity bar panel switching in VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift. Test: clicking activity bar icons switches sidebar panels (Explorer, Search, Git, Debug, Extensions, Testing). Use XCUITest. Create class ActivityBarUITests with tests: testSwitchToExplorer, testSwitchToSearch, testSwitchToGit, testSwitchToDebug, testToggleSidebarByReclick. Reference SidebarView.swift - IDEActivityBar and ActivityBarIcon.

## Response
>>>TOOL list_dir
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests"}
>>>END>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift"}
>>>END>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift"}
>>>END>>>TOOL search
{"query":"accessibilityIdentifier", "glob":"VSCodeiPadOS/VSCodeiPadOS/**/*.swift"}
>>>END>>>TOOL list_dir
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests"}
>>>END>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/VSCodeiPadOS_UITests.swift"}
>>>END>>>TOOL search
{"query":"XCUIApplication()", "glob":"VSCodeiPadOS/VSCodeiPadOS/UITests/*.swift"}
>>>END>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/LaunchTests.swift"}
>>>END>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/EditorUITests.swift"}
>>>END>>>TOOL list_dir
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests"}
>>>END

>>>TOOL create_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift","content":"import XCTest\n\n/// UI tests for verifying activity bar interactions switch/toggle the sidebar panels.\n///\n/// These tests rely on accessibility identifiers set in `SidebarView.swift` for:\n/// - Activity bar icons: `activityBar.<panel>`\n/// - Sidebar title: `sidebar.header.title`\n/// - Sidebar container: `sidebar.panel`\nfinal class ActivityBarUITests: XCTestCase {\n\n    private var app: XCUIApplication!\n\n    override func setUp() {\n        super.setUp()\n        continueAfterFailure = false\n\n        app = XCUIApplication()\n        app.launchArguments += [\"-ui-testing\"]\n        app.launch()\n\n        // Ensure activity bar is present.\n        XCTAssertTrue(app.buttons[\"activityBar.explorer\"].waitForExistence(timeout: 10))\n    }\n\n    // MARK: - Helpers\n\n    @discardableResult\n    private func tapActivity(_ id: String, expectedTitle: String, file: StaticString = #filePath, line: UInt = #line) -> XCUIElement {\n        let button = app.buttons[id]\n        XCTAssertTrue(button.waitForExistence(timeout: 5), \"Missing activity bar button: \\(id)\", file: file, line: line)\n        button.tap()\n\n        let sidebar = app.otherElements[\"sidebar.panel\"]\n        XCTAssertTrue(sidebar.waitForExistence(timeout: 5), \"Sidebar should be visible after tapping \\(id)\", file: file, line: line)\n\n        let title = app.staticTexts[\"sidebar.header.title\"]\n        XCTAssertTrue(title.waitForExistence(timeout: 5), \"Sidebar title should exist\", file: file, line: line)\n        XCTAssertEqual(title.label, expectedTitle, file: file, line: line)\n        return button\n    }\n\n    private func ensureSidebarVisible(file: StaticString = #filePath, line: UInt = #line) {\n        let sidebar = app.otherElements[\"sidebar.panel\"]\n        if !sidebar.exists {\n            app.buttons[\"activityBar.explorer\"].tap()\n        }\n        XCTAssertTrue(app.otherElements[\"sidebar.panel\"].waitForExistence(timeout: 5), file: file, line: line)\n    }\n\n    // MARK: - Tests\n\n    func testSwitchToExplorer() {\n        tapActivity(\"activityBar.explorer\", expectedTitle: \"EXPLORER\")\n    }\n\n    func testSwitchToSearch() {\n        tapActivity(\"activityBar.search\", expectedTitle: \"SEARCH\")\n    }\n\n    func testSwitchToGit() {\n        tapActivity(\"activityBar.sourceControl\", expectedTitle: \"SOURCE CONTROL\")\n    }\n\n    func testSwitchToDebug() {\n        tapActivity(\"activityBar.runAndDebug\", expectedTitle: \"RUN AND DEBUG\")\n    }\n\n    func testToggleSidebarByReclick() {\n        // Ensure sidebar is visible and Explorer selected.\n        tapActivity(\"activityBar.explorer\", expectedTitle: \"EXPLORER\")\n        ensureSidebarVisible()\n\n        let sidebar = app.otherElements[\"sidebar.panel\"]\n        XCTAssertTrue(sidebar.exists)\n\n        // Re-clicking the selected icon should toggle the sidebar hidden.\n        app.buttons[\"activityBar.explorer\"].tap()\n        XCTAssertFalse(sidebar.waitForExistence(timeout: 1))\n\n        // Clicking again should reveal it.\n        app.buttons[\"activityBar.explorer\"].tap()\n        XCTAssertTrue(sidebar.waitForExistence(timeout: 5))\n\n        let title = app.staticTexts[\"sidebar.header.title\"]\n        XCTAssertTrue(title.waitForExistence(timeout: 5))\n        XCTAssertEqual(title.label, \"EXPLORER\")\n    }\n}\n"}
>>>END
>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift","start_line":1,"end_line":230}
>>>END
>>>TOOL search
{"query":"Text(sidebarTitle)", "glob":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift"}
>>>END
>>>TOOL search
{"query":"ActivityBarIcon(icon:", "glob":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift"}
>>>END
>>>TOOL search
{"query":"Button(action:", "glob":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift"}
>>>END
>>>END

---

## ðŸ”§ TOOL RESULTS

[create_file]
âœ… Created: VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift

---

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (lines 2-230 of 284)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2: 
3: // MARK: - Sidebar View Structure
4: 
5: struct SidebarView: View {
6:     @ObservedObject var editorCore: EditorCore
7:     @ObservedObject var fileNavigator: FileSystemNavigator
8:     @Binding var selectedTab: Int
9:     @Binding var showSettings: Bool
10:     @Binding var showTerminal: Bool
11:     @Binding var showFolderPicker: Bool
12:     var theme: Theme = ThemeManager.shared.currentTheme
13:     
14:     var body: some View {
15:         HStack(spacing: 0) {
16:             // 1. Activity Bar (Far Left)
17:             IDEActivityBar(
18:                 editorCore: editorCore,
19:                 selectedTab: $selectedTab,
20:                 showSettings: $showSettings,
21:                 showTerminal: $showTerminal
22:             )
23:             
24:             // 2. Sidebar Panel (Resizable)
25:             if editorCore.showSidebar {
26:                 ZStack(alignment: .trailing) {
27:                     VStack(spacing: 0) {
28:                         // Header Area
29:                         HStack {
30:                             Text(sidebarTitle)
31:                                 .font(.system(size: 11, weight: .medium))
32:                                 .foregroundColor(.secondary)
33:                                 .textCase(.uppercase)
34:                             Spacer()
35:                             sidebarHeaderActions
36:                         }
37:                         .padding(.horizontal, 20)
38:                         .padding(.vertical, 10)
39:                         
40:                         Divider()
41:                             .background(Color(UIColor.separator))
42:                         
43:                         // Content Area
44:                         sidebarContent
45:                             .frame(maxWidth: .infinity, maxHeight: .infinity)
46:                     }
47:                     .frame(width: editorCore.sidebarWidth)
48:                     .background(Color(UIColor.secondarySystemBackground)) // Theme aware
49:                     
50:                     // 5. Resize Handle
51:                     ResizeHandle(width: $editorCore.sidebarWidth)
52:                 }
53:             }
54:         }
55:     }
56:     
57:     // Dynamic Title based on selection
58:     private var sidebarTitle: String {
59:         switch selectedTab {
60:         case 0: return "EXPLORER"
61:         case 1: return "SEARCH"
62:         case 2: return "SOURCE CONTROL"
63:         case 3: return "RUN AND DEBUG"
64:         case 4: return "EXTENSIONS"
65:         case 5: return "TESTING"
66:         default: return "EXPLORER"
67:         }
68:     }
69:     
70:     // Header Actions
71:     @ViewBuilder
72:     private var sidebarHeaderActions: some View {
73:         if selectedTab == 0 {
74:             HStack(spacing: 12) {
75:                 Button(action: { showFolderPicker = true }) {
76:                     Image(systemName: "folder.badge.plus")
77:                         .font(.system(size: 14))
78:                         .foregroundColor(.secondary)
79:                 }
80:                 .help("Open Folder")
81:                 
82:                 Button(action: { editorCore.addTab() }) {
83:                     Image(systemName: "doc.badge.plus")
84:                         .font(.system(size: 14))
85:                         .foregroundColor(.secondary)
86:                 }
87:                 .help("New File")
88:                 
89:                 Button(action: { fileNavigator.refreshFileTree() }) {
90:                     Image(systemName: "arrow.clockwise")
91:                         .font(.system(size: 14))
92:                         .foregroundColor(.secondary)
93:                 }
94:                 .help("Refresh")
95:                 
96:                 Button(action: { 
97:                      // Collapse All Action 
98:                      fileNavigator.expandedPaths.removeAll()
99:                 }) {
100:                     Image(systemName: "arrow.up.left.and.arrow.down.right") // Collapse icon
101:                         .font(.system(size: 14))
102:                         .foregroundColor(.secondary)
103:                 }
104:                 .help("Collapse All Folders")
105:             }
106:         }
107:     }
108:     
109:     // Content Switching
110:     @ViewBuilder
111:     private var sidebarContent: some View {
112:         switch selectedTab {
113:         case 0:
114:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
115:         case 1:
116:             SidebarSearchView(theme: theme)
117:         case 2:
118:             GitView()
119:         case 3:
120:             DebugView()
121:         case 4:
122:             ExtensionsView()
123:         case 5:
124:             TestView()
125:         default:
126:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
127:         }
128:     }
129: }
130: 
131: // MARK: - Activity Bar Implementation
132: 
133: struct IDEActivityBar: View {
134:     @ObservedObject var editorCore: EditorCore
135:     @Binding var selectedTab: Int
136:     @Binding var showSettings: Bool
137:     @Binding var showTerminal: Bool
138:     
139:     var body: some View {
140:         VStack(spacing: 0) {
141:             // Top Group
142:             Group {
143:                 ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore)
144:                 ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore)
145:                 ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore)
146:                 ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore)
147:                 ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore)
148:                 ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore)
149:             }
150:             
151:             Spacer()
152:             
153:             // Bottom Group
154:             Group {
155:                 ActivityBarButton(icon: "person.circle", title: "Accounts") {}
156:                 ActivityBarButton(icon: "gear", title: "Manage") {
157:                     showSettings = true
158:                 }
159:             }
160:             .padding(.bottom, 10)
161:         }
162:         .frame(width: 50)
163:         .background(Color(UIColor.secondarySystemBackground).opacity(0.8)) // Darker shade for activity bar
164:         .border(width: 1, edges: [.trailing], color: Color(UIColor.separator))
165:     }
166: }
167: 
168: struct ActivityBarIcon: View {
169:     let icon: String
170:     let title: String
171:     let index: Int
172:     @Binding var selectedTab: Int
173:     @ObservedObject var editorCore: EditorCore
174:     
175:     var isSelected: Bool { selectedTab == index }
176:     
177:     var body: some View {
178:         Button(action: {
179:             if isSelected {
180:                 // Toggle sidebar visibility if clicking already selected tab
181:                 editorCore.toggleSidebar()
182:             } else {
183:                 selectedTab = index
184:                 if !editorCore.showSidebar { editorCore.toggleSidebar() }
185:             }
186:         }) {
187:             ZStack {
188:                 // Active indicator line on left
189:                 if isSelected && editorCore.showSidebar {
190:                     HStack {
191:                         Rectangle()
192:                             .fill(Color.accentColor)
193:                             .frame(width: 2)
194:                         Spacer()
195:                     }
196:                 }
197:                 
198:                 Image(systemName: icon)
199:                     .font(.system(size: 20, weight: .light))
200:                     .foregroundColor(isSelected && editorCore.showSidebar ? .primary : .secondary)
201:                     .frame(width: 50, height: 50)
202:                     .contentShape(Rectangle())
203:             }
204:         }
205:         .buttonStyle(PlainButtonStyle())
206:         .help(title)
207:     }
208: }
209: 
210: struct ActivityBarButton: View {
211:     let icon: String
212:     let title: String
213:     let action: () -> Void
214:     
215:     var body: some View {
216:         Button(action: action) {
217:             Image(systemName: icon)
218:                 .font(.system(size: 20, weight: .light))
219:                 .foregroundColor(.secondary)
220:                 .frame(width: 50, height: 50)
221:                 .contentShape(Rectangle())
222:         }
223:         .buttonStyle(PlainButtonStyle())
224:         .help(title)
225:     }
226: }
227: 
228: // MARK: - Resize Handle (iPad Compatible)
229: 
230: struct ResizeHandle: View {

---

[search]
Found 1 matches:
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:30: Text(sidebarTitle)

---

[search]
Found 6 matches:
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:143: ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore)
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:144: ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore)
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:145: ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore)
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:146: ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore)
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:147: ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore)
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:148: ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore)

---

[search]
Found 6 matches:
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:75: Button(action: { showFolderPicker = true }) {
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:82: Button(action: { editorCore.addTab() }) {
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:89: Button(action: { fileNavigator.refreshFileTree() }) {
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:96: Button(action: {
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:178: Button(action: {
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:216: Button(action: action) {


>>>TOOL search
{"query":"ActivityBarIcon(", "glob":"VSCodeiPadOS/VSCodeiPadOS/**/*.swift"}
>>>END
>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift"}
>>>END
>>>TOOL get_symbols
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift"}
>>>END>>>TOOL search
{"query":"ActivityBarIcon(", "glob":"VSCodeiPadOS/VSCodeiPadOS/**/*.swift"}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift"}
>>>END

>>>TOOL get_symbols
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift"}
>>>END

---

## ðŸ”§ TOOL RESULTS

[search]
Found 6 matches:
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:143: ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore)
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:144: ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore)
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:145: ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore)
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:146: ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore)
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:147: ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore)
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:148: ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore)

---

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift (lines 1-89 of 89)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1: import XCTest
2: 
3: /// UI tests for verifying activity bar interactions switch/toggle the sidebar panels.
4: ///
5: /// These tests rely on accessibility identifiers set in `SidebarView.swift` for:
6: /// - Activity bar icons: `activityBar.<panel>`
7: /// - Sidebar title: `sidebar.header.title`
8: /// - Sidebar container: `sidebar.panel`
9: final class ActivityBarUITests: XCTestCase {
10: 
11:     private var app: XCUIApplication!
12: 
13:     override func setUp() {
14:         super.setUp()
15:         continueAfterFailure = false
16: 
17:         app = XCUIApplication()
18:         app.launchArguments += ["-ui-testing"]
19:         app.launch()
20: 
21:         // Ensure activity bar is present.
22:         XCTAssertTrue(app.buttons["activityBar.explorer"].waitForExistence(timeout: 10))
23:     }
24: 
25:     // MARK: - Helpers
26: 
27:     @discardableResult
28:     private func tapActivity(_ id: String, expectedTitle: String, file: StaticString = #filePath, line: UInt = #line) -> XCUIElement {
29:         let button = app.buttons[id]
30:         XCTAssertTrue(button.waitForExistence(timeout: 5), "Missing activity bar button: \(id)", file: file, line: line)
31:         button.tap()
32: 
33:         let sidebar = app.otherElements["sidebar.panel"]
34:         XCTAssertTrue(sidebar.waitForExistence(timeout: 5), "Sidebar should be visible after tapping \(id)", file: file, line: line)
35: 
36:         let title = app.staticTexts["sidebar.header.title"]
37:         XCTAssertTrue(title.waitForExistence(timeout: 5), "Sidebar title should exist", file: file, line: line)
38:         XCTAssertEqual(title.label, expectedTitle, file: file, line: line)
39:         return button
40:     }
41: 
42:     private func ensureSidebarVisible(file: StaticString = #filePath, line: UInt = #line) {
43:         let sidebar = app.otherElements["sidebar.panel"]
44:         if !sidebar.exists {
45:             app.buttons["activityBar.explorer"].tap()
46:         }
47:         XCTAssertTrue(app.otherElements["sidebar.panel"].waitForExistence(timeout: 5), file: file, line: line)
48:     }
49: 
50:     // MARK: - Tests
51: 
52:     func testSwitchToExplorer() {
53:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
54:     }
55: 
56:     func testSwitchToSearch() {
57:         tapActivity("activityBar.search", expectedTitle: "SEARCH")
58:     }
59: 
60:     func testSwitchToGit() {
61:         tapActivity("activityBar.sourceControl", expectedTitle: "SOURCE CONTROL")
62:     }
63: 
64:     func testSwitchToDebug() {
65:         tapActivity("activityBar.runAndDebug", expectedTitle: "RUN AND DEBUG")
66:     }
67: 
68:     func testToggleSidebarByReclick() {
69:         // Ensure sidebar is visible and Explorer selected.
70:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
71:         ensureSidebarVisible()
72: 
73:         let sidebar = app.otherElements["sidebar.panel"]
74:         XCTAssertTrue(sidebar.exists)
75: 
76:         // Re-clicking the selected icon should toggle the sidebar hidden.
77:         app.buttons["activityBar.explorer"].tap()
78:         XCTAssertFalse(sidebar.waitForExistence(timeout: 1))
79: 
80:         // Clicking again should reveal it.
81:         app.buttons["activityBar.explorer"].tap()
82:         XCTAssertTrue(sidebar.waitForExistence(timeout: 5))
83: 
84:         let title = app.staticTexts["sidebar.header.title"]
85:         XCTAssertTrue(title.waitForExistence(timeout: 5))
86:         XCTAssertEqual(title.label, "EXPLORER")
87:     }
88: }
89: 

---

[get_symbols]
No symbols found in VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (file may need to be opened first)


>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift","start_line":1,"end_line":230}
>>>END
>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift","start_line":230,"end_line":284}
>>>END
>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift","start_line":1,"end_line":120}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (lines 2-230 of 284)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2: 
3: // MARK: - Sidebar View Structure
4: 
5: struct SidebarView: View {
6:     @ObservedObject var editorCore: EditorCore
7:     @ObservedObject var fileNavigator: FileSystemNavigator
8:     @Binding var selectedTab: Int
9:     @Binding var showSettings: Bool
10:     @Binding var showTerminal: Bool
11:     @Binding var showFolderPicker: Bool
12:     var theme: Theme = ThemeManager.shared.currentTheme
13:     
14:     var body: some View {
15:         HStack(spacing: 0) {
16:             // 1. Activity Bar (Far Left)
17:             IDEActivityBar(
18:                 editorCore: editorCore,
19:                 selectedTab: $selectedTab,
20:                 showSettings: $showSettings,
21:                 showTerminal: $showTerminal
22:             )
23:             
24:             // 2. Sidebar Panel (Resizable)
25:             if editorCore.showSidebar {
26:                 ZStack(alignment: .trailing) {
27:                     VStack(spacing: 0) {
28:                         // Header Area
29:                         HStack {
30:                             Text(sidebarTitle)
31:                                 .font(.system(size: 11, weight: .medium))
32:                                 .foregroundColor(.secondary)
33:                                 .textCase(.uppercase)
34:                             Spacer()
35:                             sidebarHeaderActions
36:                         }
37:                         .padding(.horizontal, 20)
38:                         .padding(.vertical, 10)
39:                         
40:                         Divider()
41:                             .background(Color(UIColor.separator))
42:                         
43:                         // Content Area
44:                         sidebarContent
45:                             .frame(maxWidth: .infinity, maxHeight: .infinity)
46:                     }
47:                     .frame(width: editorCore.sidebarWidth)
48:                     .background(Color(UIColor.secondarySystemBackground)) // Theme aware
49:                     
50:                     // 5. Resize Handle
51:                     ResizeHandle(width: $editorCore.sidebarWidth)
52:                 }
53:             }
54:         }
55:     }
56:     
57:     // Dynamic Title based on selection
58:     private var sidebarTitle: String {
59:         switch selectedTab {
60:         case 0: return "EXPLORER"
61:         case 1: return "SEARCH"
62:         case 2: return "SOURCE CONTROL"
63:         case 3: return "RUN AND DEBUG"
64:         case 4: return "EXTENSIONS"
65:         case 5: return "TESTING"
66:         default: return "EXPLORER"
67:         }
68:     }
69:     
70:     // Header Actions
71:     @ViewBuilder
72:     private var sidebarHeaderActions: some View {
73:         if selectedTab == 0 {
74:             HStack(spacing: 12) {
75:                 Button(action: { showFolderPicker = true }) {
76:                     Image(systemName: "folder.badge.plus")
77:                         .font(.system(size: 14))
78:                         .foregroundColor(.secondary)
79:                 }
80:                 .help("Open Folder")
81:                 
82:                 Button(action: { editorCore.addTab() }) {
83:                     Image(systemName: "doc.badge.plus")
84:                         .font(.system(size: 14))
85:                         .foregroundColor(.secondary)
86:                 }
87:                 .help("New File")
88:                 
89:                 Button(action: { fileNavigator.refreshFileTree() }) {
90:                     Image(systemName: "arrow.clockwise")
91:                         .font(.system(size: 14))
92:                         .foregroundColor(.secondary)
93:                 }
94:                 .help("Refresh")
95:                 
96:                 Button(action: { 
97:                      // Collapse All Action 
98:                      fileNavigator.expandedPaths.removeAll()
99:                 }) {
100:                     Image(systemName: "arrow.up.left.and.arrow.down.right") // Collapse icon
101:                         .font(.system(size: 14))
102:                         .foregroundColor(.secondary)
103:                 }
104:                 .help("Collapse All Folders")
105:             }
106:         }
107:     }
108:     
109:     // Content Switching
110:     @ViewBuilder
111:     private var sidebarContent: some View {
112:         switch selectedTab {
113:         case 0:
114:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
115:         case 1:
116:             SidebarSearchView(theme: theme)
117:         case 2:
118:             GitView()
119:         case 3:
120:             DebugView()
121:         case 4:
122:             ExtensionsView()
123:         case 5:
124:             TestView()
125:         default:
126:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
127:         }
128:     }
129: }
130: 
131: // MARK: - Activity Bar Implementation
132: 
133: struct IDEActivityBar: View {
134:     @ObservedObject var editorCore: EditorCore
135:     @Binding var selectedTab: Int
136:     @Binding var showSettings: Bool
137:     @Binding var showTerminal: Bool
138:     
139:     var body: some View {
140:         VStack(spacing: 0) {
141:             // Top Group
142:             Group {
143:                 ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore)
144:                 ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore)
145:                 ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore)
146:                 ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore)
147:                 ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore)
148:                 ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore)
149:             }
150:             
151:             Spacer()
152:             
153:             // Bottom Group
154:             Group {
155:                 ActivityBarButton(icon: "person.circle", title: "Accounts") {}
156:                 ActivityBarButton(icon: "gear", title: "Manage") {
157:                     showSettings = true
158:                 }
159:             }
160:             .padding(.bottom, 10)
161:         }
162:         .frame(width: 50)
163:         .background(Color(UIColor.secondarySystemBackground).opacity(0.8)) // Darker shade for activity bar
164:         .border(width: 1, edges: [.trailing], color: Color(UIColor.separator))
165:     }
166: }
167: 
168: struct ActivityBarIcon: View {
169:     let icon: String
170:     let title: String
171:     let index: Int
172:     @Binding var selectedTab: Int
173:     @ObservedObject var editorCore: EditorCore
174:     
175:     var isSelected: Bool { selectedTab == index }
176:     
177:     var body: some View {
178:         Button(action: {
179:             if isSelected {
180:                 // Toggle sidebar visibility if clicking already selected tab
181:                 editorCore.toggleSidebar()
182:             } else {
183:                 selectedTab = index
184:                 if !editorCore.showSidebar { editorCore.toggleSidebar() }
185:             }
186:         }) {
187:             ZStack {
188:                 // Active indicator line on left
189:                 if isSelected && editorCore.showSidebar {
190:                     HStack {
191:                         Rectangle()
192:                             .fill(Color.accentColor)
193:                             .frame(width: 2)
194:                         Spacer()
195:                     }
196:                 }
197:                 
198:                 Image(systemName: icon)
199:                     .font(.system(size: 20, weight: .light))
200:                     .foregroundColor(isSelected && editorCore.showSidebar ? .primary : .secondary)
201:                     .frame(width: 50, height: 50)
202:                     .contentShape(Rectangle())
203:             }
204:         }
205:         .buttonStyle(PlainButtonStyle())
206:         .help(title)
207:     }
208: }
209: 
210: struct ActivityBarButton: View {
211:     let icon: String
212:     let title: String
213:     let action: () -> Void
214:     
215:     var body: some View {
216:         Button(action: action) {
217:             Image(systemName: icon)
218:                 .font(.system(size: 20, weight: .light))
219:                 .foregroundColor(.secondary)
220:                 .frame(width: 50, height: 50)
221:                 .contentShape(Rectangle())
222:         }
223:         .buttonStyle(PlainButtonStyle())
224:         .help(title)
225:     }
226: }
227: 
228: // MARK: - Resize Handle (iPad Compatible)
229: 
230: struct ResizeHandle: View {

---

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (lines 231-284 of 284)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
231:     @Binding var width: CGFloat
232:     @State private var isDragging = false
233:     
234:     var body: some View {
235:         HStack(spacing: 0) {
236:             Spacer()
237:             ZStack {
238:                 // Invisible larger hit area
239:                 Rectangle()
240:                     .fill(Color.clear)
241:                     .frame(width: 10)
242:                 
243:                 // Visible separator line
244:                 Rectangle()
245:                     .fill(isDragging ? Color.accentColor : Color(UIColor.separator))
246:                     .frame(width: 1)
247:             }
248:             .contentShape(Rectangle())
249:             .gesture(
250:                 DragGesture()
251:                     .onChanged { value in
252:                         isDragging = true
253:                         let newWidth = width + value.translation.width
254:                         // Clamp width (Min 170, Max 600)
255:                         if newWidth >= 170 && newWidth <= 600 {
256:                             width = newWidth
257:                         }
258:                     }
259:                     .onEnded { _ in
260:                         isDragging = false
261:                     }
262:             )
263:         }
264:     }
265: }
266: 
267: // MARK: - Placeholders for Missing Views
268: 
269: 
270: 
271: struct ExtensionsView: View {
272:     var body: some View {
273:         VStack {
274:             Text("Extensions")
275:                 .font(.caption)
276:                 .foregroundColor(.secondary)
277:                 .padding()
278:             Spacer()
279:         }
280:     }
281: }
282: 
283: 
284: 

---

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift (lines 2-89 of 89)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2: 
3: /// UI tests for verifying activity bar interactions switch/toggle the sidebar panels.
4: ///
5: /// These tests rely on accessibility identifiers set in `SidebarView.swift` for:
6: /// - Activity bar icons: `activityBar.<panel>`
7: /// - Sidebar title: `sidebar.header.title`
8: /// - Sidebar container: `sidebar.panel`
9: final class ActivityBarUITests: XCTestCase {
10: 
11:     private var app: XCUIApplication!
12: 
13:     override func setUp() {
14:         super.setUp()
15:         continueAfterFailure = false
16: 
17:         app = XCUIApplication()
18:         app.launchArguments += ["-ui-testing"]
19:         app.launch()
20: 
21:         // Ensure activity bar is present.
22:         XCTAssertTrue(app.buttons["activityBar.explorer"].waitForExistence(timeout: 10))
23:     }
24: 
25:     // MARK: - Helpers
26: 
27:     @discardableResult
28:     private func tapActivity(_ id: String, expectedTitle: String, file: StaticString = #filePath, line: UInt = #line) -> XCUIElement {
29:         let button = app.buttons[id]
30:         XCTAssertTrue(button.waitForExistence(timeout: 5), "Missing activity bar button: \(id)", file: file, line: line)
31:         button.tap()
32: 
33:         let sidebar = app.otherElements["sidebar.panel"]
34:         XCTAssertTrue(sidebar.waitForExistence(timeout: 5), "Sidebar should be visible after tapping \(id)", file: file, line: line)
35: 
36:         let title = app.staticTexts["sidebar.header.title"]
37:         XCTAssertTrue(title.waitForExistence(timeout: 5), "Sidebar title should exist", file: file, line: line)
38:         XCTAssertEqual(title.label, expectedTitle, file: file, line: line)
39:         return button
40:     }
41: 
42:     private func ensureSidebarVisible(file: StaticString = #filePath, line: UInt = #line) {
43:         let sidebar = app.otherElements["sidebar.panel"]
44:         if !sidebar.exists {
45:             app.buttons["activityBar.explorer"].tap()
46:         }
47:         XCTAssertTrue(app.otherElements["sidebar.panel"].waitForExistence(timeout: 5), file: file, line: line)
48:     }
49: 
50:     // MARK: - Tests
51: 
52:     func testSwitchToExplorer() {
53:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
54:     }
55: 
56:     func testSwitchToSearch() {
57:         tapActivity("activityBar.search", expectedTitle: "SEARCH")
58:     }
59: 
60:     func testSwitchToGit() {
61:         tapActivity("activityBar.sourceControl", expectedTitle: "SOURCE CONTROL")
62:     }
63: 
64:     func testSwitchToDebug() {
65:         tapActivity("activityBar.runAndDebug", expectedTitle: "RUN AND DEBUG")
66:     }
67: 
68:     func testToggleSidebarByReclick() {
69:         // Ensure sidebar is visible and Explorer selected.
70:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
71:         ensureSidebarVisible()
72: 
73:         let sidebar = app.otherElements["sidebar.panel"]
74:         XCTAssertTrue(sidebar.exists)
75: 
76:         // Re-clicking the selected icon should toggle the sidebar hidden.
77:         app.buttons["activityBar.explorer"].tap()
78:         XCTAssertFalse(sidebar.waitForExistence(timeout: 1))
79: 
80:         // Clicking again should reveal it.
81:         app.buttons["activityBar.explorer"].tap()
82:         XCTAssertTrue(sidebar.waitForExistence(timeout: 5))
83: 
84:         let title = app.staticTexts["sidebar.header.title"]
85:         XCTAssertTrue(title.waitForExistence(timeout: 5))
86:         XCTAssertEqual(title.label, "EXPLORER")
87:     }
88: }
89: 


>>>FILE VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift
>>>FIND
                            Text(sidebarTitle)
                                .font(.system(size: 11, weight: .medium))
                                .foregroundColor(.secondary)
                                .textCase(.uppercase)
>>>REPLACE
                            Text(sidebarTitle)
                                .font(.system(size: 11, weight: .medium))
                                .foregroundColor(.secondary)
                                .textCase(.uppercase)
                                .accessibilityIdentifier("sidebar.header.title")
>>>END

>>>FILE VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift
>>>FIND
                    VStack(spacing: 0) {
                        // Header Area
                        HStack {
                            Text(sidebarTitle)
                                .font(.system(size: 11, weight: .medium))
                                .foregroundColor(.secondary)
                                .textCase(.uppercase)
                            Spacer()
                            sidebarHeaderActions
                        }
                        .padding(.horizontal, 20)
                        .padding(.vertical, 10)
                        
                        Divider()
                            .background(Color(UIColor.separator))
                        
                        // Content Area
                        sidebarContent
                            .frame(maxWidth: .infinity, maxHeight: .infinity)
                    }
                    .frame(width: editorCore.sidebarWidth)
                    .background(Color(UIColor.secondarySystemBackground)) // Theme aware
>>>REPLACE
                    VStack(spacing: 0) {
                        // Header Area
                        HStack {
                            Text(sidebarTitle)
                                .font(.system(size: 11, weight: .medium))
                                .foregroundColor(.secondary)
                                .textCase(.uppercase)
                                .accessibilityIdentifier("sidebar.header.title")
                            Spacer()
                            sidebarHeaderActions
                        }
                        .padding(.horizontal, 20)
                        .padding(.vertical, 10)
                        
                        Divider()
                            .background(Color(UIColor.separator))
                        
                        // Content Area
                        sidebarContent
                            .frame(maxWidth: .infinity, maxHeight: .infinity)
                    }
                    .frame(width: editorCore.sidebarWidth)
                    .background(Color(UIColor.secondarySystemBackground)) // Theme aware
                    .accessibilityIdentifier("sidebar.panel")
>>>END

>>>FILE VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift
>>>FIND
                ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore)
                ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore)
                ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore)
                ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore)
                ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore)
                ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore)
>>>REPLACE
                ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.explorer")
                ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.search")
                ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.sourceControl")
                ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.runAndDebug")
                ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.extensions")
                ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.testing")
>>>END

>>>FILE VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift
>>>FIND
struct ActivityBarIcon: View {
    let icon: String
    let title: String
    let index: Int
    @Binding var selectedTab: Int
    @ObservedObject var editorCore: EditorCore
    
    var isSelected: Bool { selectedTab == index }
    
    var body: some View {
        Button(action: {
            if isSelected {
                // Toggle sidebar visibility if clicking already selected tab
                editorCore.toggleSidebar()
            } else {
                selectedTab = index
                if !editorCore.showSidebar { editorCore.toggleSidebar() }
            }
        }) {
            ZStack {
                // Active indicator line on left
                if isSelected && editorCore.showSidebar {
                    HStack {
                        Rectangle()
                            .fill(Color.accentColor)
                            .frame(width: 2)
                        Spacer()
                    }
                }
                
                Image(systemName: icon)
                    .font(.system(size: 20, weight: .light))
                    .foregroundColor(isSelected && editorCore.showSidebar ? .primary : .secondary)
                    .frame(width: 50, height: 50)
                    .contentShape(Rectangle())
            }
        }
        .buttonStyle(PlainButtonStyle())
        .help(title)
    }
}
>>>REPLACE
struct ActivityBarIcon: View {
    let icon: String
    let title: String
    let index: Int
    @Binding var selectedTab: Int
    @ObservedObject var editorCore: EditorCore
    let accessibilityID: String
    
    var isSelected: Bool { selectedTab == index }
    
    var body: some View {
        Button(action: {
            if isSelected {
                // Toggle sidebar visibility if clicking already selected tab
                editorCore.toggleSidebar()
            } else {
                selectedTab = index
                if !editorCore.showSidebar { editorCore.toggleSidebar() }
            }
        }) {
            ZStack {
                // Active indicator line on left
                if isSelected && editorCore.showSidebar {
                    HStack {
                        Rectangle()
                            .fill(Color.accentColor)
                            .frame(width: 2)
                        Spacer()
                    }
                }
                
                Image(systemName: icon)
                    .font(.system(size: 20, weight: .light))
                    .foregroundColor(isSelected && editorCore.showSidebar ? .primary : .secondary)
                    .frame(width: 50, height: 50)
                    .contentShape(Rectangle())
            }
        }
        .buttonStyle(PlainButtonStyle())
        .help(title)
        .accessibilityIdentifier(accessibilityID)
    }
}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift","start_line":1,"end_line":220}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (lines 2-220 of 284)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2: 
3: // MARK: - Sidebar View Structure
4: 
5: struct SidebarView: View {
6:     @ObservedObject var editorCore: EditorCore
7:     @ObservedObject var fileNavigator: FileSystemNavigator
8:     @Binding var selectedTab: Int
9:     @Binding var showSettings: Bool
10:     @Binding var showTerminal: Bool
11:     @Binding var showFolderPicker: Bool
12:     var theme: Theme = ThemeManager.shared.currentTheme
13:     
14:     var body: some View {
15:         HStack(spacing: 0) {
16:             // 1. Activity Bar (Far Left)
17:             IDEActivityBar(
18:                 editorCore: editorCore,
19:                 selectedTab: $selectedTab,
20:                 showSettings: $showSettings,
21:                 showTerminal: $showTerminal
22:             )
23:             
24:             // 2. Sidebar Panel (Resizable)
25:             if editorCore.showSidebar {
26:                 ZStack(alignment: .trailing) {
27:                     VStack(spacing: 0) {
28:                         // Header Area
29:                         HStack {
30:                             Text(sidebarTitle)
31:                                 .font(.system(size: 11, weight: .medium))
32:                                 .foregroundColor(.secondary)
33:                                 .textCase(.uppercase)
34:                             Spacer()
35:                             sidebarHeaderActions
36:                         }
37:                         .padding(.horizontal, 20)
38:                         .padding(.vertical, 10)
39:                         
40:                         Divider()
41:                             .background(Color(UIColor.separator))
42:                         
43:                         // Content Area
44:                         sidebarContent
45:                             .frame(maxWidth: .infinity, maxHeight: .infinity)
46:                     }
47:                     .frame(width: editorCore.sidebarWidth)
48:                     .background(Color(UIColor.secondarySystemBackground)) // Theme aware
49:                     
50:                     // 5. Resize Handle
51:                     ResizeHandle(width: $editorCore.sidebarWidth)
52:                 }
53:             }
54:         }
55:     }
56:     
57:     // Dynamic Title based on selection
58:     private var sidebarTitle: String {
59:         switch selectedTab {
60:         case 0: return "EXPLORER"
61:         case 1: return "SEARCH"
62:         case 2: return "SOURCE CONTROL"
63:         case 3: return "RUN AND DEBUG"
64:         case 4: return "EXTENSIONS"
65:         case 5: return "TESTING"
66:         default: return "EXPLORER"
67:         }
68:     }
69:     
70:     // Header Actions
71:     @ViewBuilder
72:     private var sidebarHeaderActions: some View {
73:         if selectedTab == 0 {
74:             HStack(spacing: 12) {
75:                 Button(action: { showFolderPicker = true }) {
76:                     Image(systemName: "folder.badge.plus")
77:                         .font(.system(size: 14))
78:                         .foregroundColor(.secondary)
79:                 }
80:                 .help("Open Folder")
81:                 
82:                 Button(action: { editorCore.addTab() }) {
83:                     Image(systemName: "doc.badge.plus")
84:                         .font(.system(size: 14))
85:                         .foregroundColor(.secondary)
86:                 }
87:                 .help("New File")
88:                 
89:                 Button(action: { fileNavigator.refreshFileTree() }) {
90:                     Image(systemName: "arrow.clockwise")
91:                         .font(.system(size: 14))
92:                         .foregroundColor(.secondary)
93:                 }
94:                 .help("Refresh")
95:                 
96:                 Button(action: { 
97:                      // Collapse All Action 
98:                      fileNavigator.expandedPaths.removeAll()
99:                 }) {
100:                     Image(systemName: "arrow.up.left.and.arrow.down.right") // Collapse icon
101:                         .font(.system(size: 14))
102:                         .foregroundColor(.secondary)
103:                 }
104:                 .help("Collapse All Folders")
105:             }
106:         }
107:     }
108:     
109:     // Content Switching
110:     @ViewBuilder
111:     private var sidebarContent: some View {
112:         switch selectedTab {
113:         case 0:
114:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
115:         case 1:
116:             SidebarSearchView(theme: theme)
117:         case 2:
118:             GitView()
119:         case 3:
120:             DebugView()
121:         case 4:
122:             ExtensionsView()
123:         case 5:
124:             TestView()
125:         default:
126:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
127:         }
128:     }
129: }
130: 
131: // MARK: - Activity Bar Implementation
132: 
133: struct IDEActivityBar: View {
134:     @ObservedObject var editorCore: EditorCore
135:     @Binding var selectedTab: Int
136:     @Binding var showSettings: Bool
137:     @Binding var showTerminal: Bool
138:     
139:     var body: some View {
140:         VStack(spacing: 0) {
141:             // Top Group
142:             Group {
143:                 ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore)
144:                 ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore)
145:                 ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore)
146:                 ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore)
147:                 ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore)
148:                 ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore)
149:             }
150:             
151:             Spacer()
152:             
153:             // Bottom Group
154:             Group {
155:                 ActivityBarButton(icon: "person.circle", title: "Accounts") {}
156:                 ActivityBarButton(icon: "gear", title: "Manage") {
157:                     showSettings = true
158:                 }
159:             }
160:             .padding(.bottom, 10)
161:         }
162:         .frame(width: 50)
163:         .background(Color(UIColor.secondarySystemBackground).opacity(0.8)) // Darker shade for activity bar
164:         .border(width: 1, edges: [.trailing], color: Color(UIColor.separator))
165:     }
166: }
167: 
168: struct ActivityBarIcon: View {
169:     let icon: String
170:     let title: String
171:     let index: Int
172:     @Binding var selectedTab: Int
173:     @ObservedObject var editorCore: EditorCore
174:     
175:     var isSelected: Bool { selectedTab == index }
176:     
177:     var body: some View {
178:         Button(action: {
179:             if isSelected {
180:                 // Toggle sidebar visibility if clicking already selected tab
181:                 editorCore.toggleSidebar()
182:             } else {
183:                 selectedTab = index
184:                 if !editorCore.showSidebar { editorCore.toggleSidebar() }
185:             }
186:         }) {
187:             ZStack {
188:                 // Active indicator line on left
189:                 if isSelected && editorCore.showSidebar {
190:                     HStack {
191:                         Rectangle()
192:                             .fill(Color.accentColor)
193:                             .frame(width: 2)
194:                         Spacer()
195:                     }
196:                 }
197:                 
198:                 Image(systemName: icon)
199:                     .font(.system(size: 20, weight: .light))
200:                     .foregroundColor(isSelected && editorCore.showSidebar ? .primary : .secondary)
201:                     .frame(width: 50, height: 50)
202:                     .contentShape(Rectangle())
203:             }
204:         }
205:         .buttonStyle(PlainButtonStyle())
206:         .help(title)
207:     }
208: }
209: 
210: struct ActivityBarButton: View {
211:     let icon: String
212:     let title: String
213:     let action: () -> Void
214:     
215:     var body: some View {
216:         Button(action: action) {
217:             Image(systemName: icon)
218:                 .font(.system(size: 20, weight: .light))
219:                 .foregroundColor(.secondary)
220:                 .frame(width: 50, height: 50)

---

[FILE VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift]
Applied 1 patch(es)

---

[FILE VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift]
Failed:                     VStack(spacing: 0) {
         ...

---

[FILE VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift]
Applied 1 patch(es)

---

[FILE VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift]
Applied 1 patch(es)


>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift","start_line":1,"end_line":230}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (lines 2-230 of 287)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2: 
3: // MARK: - Sidebar View Structure
4: 
5: struct SidebarView: View {
6:     @ObservedObject var editorCore: EditorCore
7:     @ObservedObject var fileNavigator: FileSystemNavigator
8:     @Binding var selectedTab: Int
9:     @Binding var showSettings: Bool
10:     @Binding var showTerminal: Bool
11:     @Binding var showFolderPicker: Bool
12:     var theme: Theme = ThemeManager.shared.currentTheme
13:     
14:     var body: some View {
15:         HStack(spacing: 0) {
16:             // 1. Activity Bar (Far Left)
17:             IDEActivityBar(
18:                 editorCore: editorCore,
19:                 selectedTab: $selectedTab,
20:                 showSettings: $showSettings,
21:                 showTerminal: $showTerminal
22:             )
23:             
24:             // 2. Sidebar Panel (Resizable)
25:             if editorCore.showSidebar {
26:                 ZStack(alignment: .trailing) {
27:                     VStack(spacing: 0) {
28:                         // Header Area
29:                         HStack {
30:                             Text(sidebarTitle)
31:                                 .font(.system(size: 11, weight: .medium))
32:                                 .foregroundColor(.secondary)
33:                                 .textCase(.uppercase)
34:                                 .accessibilityIdentifier("sidebar.header.title")
35:                             Spacer()
36:                             sidebarHeaderActions
37:                         }
38:                         .padding(.horizontal, 20)
39:                         .padding(.vertical, 10)
40:                         
41:                         Divider()
42:                             .background(Color(UIColor.separator))
43:                         
44:                         // Content Area
45:                         sidebarContent
46:                             .frame(maxWidth: .infinity, maxHeight: .infinity)
47:                     }
48:                     .frame(width: editorCore.sidebarWidth)
49:                     .background(Color(UIColor.secondarySystemBackground)) // Theme aware
50:                     
51:                     // 5. Resize Handle
52:                     ResizeHandle(width: $editorCore.sidebarWidth)
53:                 }
54:             }
55:         }
56:     }
57:     
58:     // Dynamic Title based on selection
59:     private var sidebarTitle: String {
60:         switch selectedTab {
61:         case 0: return "EXPLORER"
62:         case 1: return "SEARCH"
63:         case 2: return "SOURCE CONTROL"
64:         case 3: return "RUN AND DEBUG"
65:         case 4: return "EXTENSIONS"
66:         case 5: return "TESTING"
67:         default: return "EXPLORER"
68:         }
69:     }
70:     
71:     // Header Actions
72:     @ViewBuilder
73:     private var sidebarHeaderActions: some View {
74:         if selectedTab == 0 {
75:             HStack(spacing: 12) {
76:                 Button(action: { showFolderPicker = true }) {
77:                     Image(systemName: "folder.badge.plus")
78:                         .font(.system(size: 14))
79:                         .foregroundColor(.secondary)
80:                 }
81:                 .help("Open Folder")
82:                 
83:                 Button(action: { editorCore.addTab() }) {
84:                     Image(systemName: "doc.badge.plus")
85:                         .font(.system(size: 14))
86:                         .foregroundColor(.secondary)
87:                 }
88:                 .help("New File")
89:                 
90:                 Button(action: { fileNavigator.refreshFileTree() }) {
91:                     Image(systemName: "arrow.clockwise")
92:                         .font(.system(size: 14))
93:                         .foregroundColor(.secondary)
94:                 }
95:                 .help("Refresh")
96:                 
97:                 Button(action: { 
98:                      // Collapse All Action 
99:                      fileNavigator.expandedPaths.removeAll()
100:                 }) {
101:                     Image(systemName: "arrow.up.left.and.arrow.down.right") // Collapse icon
102:                         .font(.system(size: 14))
103:                         .foregroundColor(.secondary)
104:                 }
105:                 .help("Collapse All Folders")
106:             }
107:         }
108:     }
109:     
110:     // Content Switching
111:     @ViewBuilder
112:     private var sidebarContent: some View {
113:         switch selectedTab {
114:         case 0:
115:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
116:         case 1:
117:             SidebarSearchView(theme: theme)
118:         case 2:
119:             GitView()
120:         case 3:
121:             DebugView()
122:         case 4:
123:             ExtensionsView()
124:         case 5:
125:             TestView()
126:         default:
127:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
128:         }
129:     }
130: }
131: 
132: // MARK: - Activity Bar Implementation
133: 
134: struct IDEActivityBar: View {
135:     @ObservedObject var editorCore: EditorCore
136:     @Binding var selectedTab: Int
137:     @Binding var showSettings: Bool
138:     @Binding var showTerminal: Bool
139:     
140:     var body: some View {
141:         VStack(spacing: 0) {
142:             // Top Group
143:             Group {
144:                 ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.explorer")
145:                 ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.search")
146:                 ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.sourceControl")
147:                 ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.runAndDebug")
148:                 ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.extensions")
149:                 ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.testing")
150:             }
151:             
152:             Spacer()
153:             
154:             // Bottom Group
155:             Group {
156:                 ActivityBarButton(icon: "person.circle", title: "Accounts") {}
157:                 ActivityBarButton(icon: "gear", title: "Manage") {
158:                     showSettings = true
159:                 }
160:             }
161:             .padding(.bottom, 10)
162:         }
163:         .frame(width: 50)
164:         .background(Color(UIColor.secondarySystemBackground).opacity(0.8)) // Darker shade for activity bar
165:         .border(width: 1, edges: [.trailing], color: Color(UIColor.separator))
166:     }
167: }
168: 
169: struct ActivityBarIcon: View {
170:     let icon: String
171:     let title: String
172:     let index: Int
173:     @Binding var selectedTab: Int
174:     @ObservedObject var editorCore: EditorCore
175:     let accessibilityID: String
176:     
177:     var isSelected: Bool { selectedTab == index }
178:     
179:     var body: some View {
180:         Button(action: {
181:             if isSelected {
182:                 // Toggle sidebar visibility if clicking already selected tab
183:                 editorCore.toggleSidebar()
184:             } else {
185:                 selectedTab = index
186:                 if !editorCore.showSidebar { editorCore.toggleSidebar() }
187:             }
188:         }) {
189:             ZStack {
190:                 // Active indicator line on left
191:                 if isSelected && editorCore.showSidebar {
192:                     HStack {
193:                         Rectangle()
194:                             .fill(Color.accentColor)
195:                             .frame(width: 2)
196:                         Spacer()
197:                     }
198:                 }
199:                 
200:                 Image(systemName: icon)
201:                     .font(.system(size: 20, weight: .light))
202:                     .foregroundColor(isSelected && editorCore.showSidebar ? .primary : .secondary)
203:                     .frame(width: 50, height: 50)
204:                     .contentShape(Rectangle())
205:             }
206:         }
207:         .buttonStyle(PlainButtonStyle())
208:         .help(title)
209:         .accessibilityIdentifier(accessibilityID)
210:     }
211: }
212: 
213: struct ActivityBarButton: View {
214:     let icon: String
215:     let title: String
216:     let action: () -> Void
217:     
218:     var body: some View {
219:         Button(action: action) {
220:             Image(systemName: icon)
221:                 .font(.system(size: 20, weight: .light))
222:                 .foregroundColor(.secondary)
223:                 .frame(width: 50, height: 50)
224:                 .contentShape(Rectangle())
225:         }
226:         .buttonStyle(PlainButtonStyle())
227:         .help(title)
228:     }
229: }
230: 


>>>FILE VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift
>>>FIND
                    VStack(spacing: 0) {
                        // Header Area
                        HStack {
                            Text(sidebarTitle)
                                .font(.system(size: 11, weight: .medium))
                                .foregroundColor(.secondary)
                                .textCase(.uppercase)
                                .accessibilityIdentifier("sidebar.header.title")
                            Spacer()
                            sidebarHeaderActions
                        }
                        .padding(.horizontal, 20)
                        .padding(.vertical, 10)
                        
                        Divider()
                            .background(Color(UIColor.separator))
                        
                        // Content Area
                        sidebarContent
                            .frame(maxWidth: .infinity, maxHeight: .infinity)
                    }
                    .frame(width: editorCore.sidebarWidth)
                    .background(Color(UIColor.secondarySystemBackground)) // Theme aware
                    
                    // 5. Resize Handle
                    ResizeHandle(width: $editorCore.sidebarWidth)
>>>REPLACE
                    VStack(spacing: 0) {
                        // Header Area
                        HStack {
                            Text(sidebarTitle)
                                .font(.system(size: 11, weight: .medium))
                                .foregroundColor(.secondary)
                                .textCase(.uppercase)
                                .accessibilityIdentifier("sidebar.header.title")
                            Spacer()
                            sidebarHeaderActions
                        }
                        .padding(.horizontal, 20)
                        .padding(.vertical, 10)
                        
                        Divider()
                            .background(Color(UIColor.separator))
                        
                        // Content Area
                        sidebarContent
                            .frame(maxWidth: .infinity, maxHeight: .infinity)
                    }
                    .frame(width: editorCore.sidebarWidth)
                    .background(Color(UIColor.secondarySystemBackground)) // Theme aware
                    .accessibilityIdentifier("sidebar.panel")
                    
                    // 5. Resize Handle
                    ResizeHandle(width: $editorCore.sidebarWidth)
>>>END

>>>FILE VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift
>>>FIND
final class ActivityBarUITests: XCTestCase {

    private var app: XCUIApplication!

    override func setUp() {
        super.setUp()
        continueAfterFailure = false

        app = XCUIApplication()
        app.launchArguments += ["-ui-testing"]
        app.launch()

        // Ensure activity bar is present.
        XCTAssertTrue(app.buttons["activityBar.explorer"].waitForExistence(timeout: 10))
    }

    // MARK: - Helpers
>>>REPLACE
final class ActivityBarUITests: XCTestCase {

    private var app: XCUIApplication!

    override func setUp() {
        super.setUp()
        continueAfterFailure = false

        app = XCUIApplication()
        app.launchArguments += ["-ui-testing"]
        app.launch()

        // Ensure activity bar is present.
        XCTAssertTrue(app.buttons["activityBar.explorer"].waitForExistence(timeout: 10))
    }

    // MARK: - Helpers

    private func waitForSidebar(visible: Bool, timeout: TimeInterval = 5, file: StaticString = #filePath, line: UInt = #line) {
        let sidebar = app.otherElements[\"sidebar.panel\"]
        let predicate = NSPredicate(format: \"exists == %@\", NSNumber(value: visible))
        expectation(for: predicate, evaluatedWith: sidebar)
        waitForExpectations(timeout: timeout)
        XCTAssertEqual(sidebar.exists, visible, file: file, line: line)
    }
>>>END

>>>FILE VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift
>>>FIND
        let sidebar = app.otherElements["sidebar.panel"]
        XCTAssertTrue(sidebar.exists)

        // Re-clicking the selected icon should toggle the sidebar hidden.
        app.buttons["activityBar.explorer"].tap()
        XCTAssertFalse(sidebar.waitForExistence(timeout: 1))

        // Clicking again should reveal it.
        app.buttons["activityBar.explorer"].tap()
        XCTAssertTrue(sidebar.waitForExistence(timeout: 5))
>>>REPLACE
        let sidebar = app.otherElements["sidebar.panel"]
        XCTAssertTrue(sidebar.exists)

        // Re-clicking the selected icon should toggle the sidebar hidden.
        app.buttons["activityBar.explorer"].tap()
        waitForSidebar(visible: false)

        // Clicking again should reveal it.
        app.buttons["activityBar.explorer"].tap()
        waitForSidebar(visible: true)
>>>END

>>>FILE VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift
>>>FIND
    func testSwitchToDebug() {
        tapActivity("activityBar.runAndDebug", expectedTitle: "RUN AND DEBUG")
    }

    func testToggleSidebarByReclick() {
>>>REPLACE
    func testSwitchToDebug() {
        tapActivity("activityBar.runAndDebug", expectedTitle: "RUN AND DEBUG")
    }

    func testSwitchToExtensions() {
        tapActivity("activityBar.extensions", expectedTitle: "EXTENSIONS")
    }

    func testSwitchToTesting() {
        tapActivity("activityBar.testing", expectedTitle: "TESTING")
    }

    func testToggleSidebarByReclick() {
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift"}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift (lines 1-89 of 89)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1: import XCTest
2: 
3: /// UI tests for verifying activity bar interactions switch/toggle the sidebar panels.
4: ///
5: /// These tests rely on accessibility identifiers set in `SidebarView.swift` for:
6: /// - Activity bar icons: `activityBar.<panel>`
7: /// - Sidebar title: `sidebar.header.title`
8: /// - Sidebar container: `sidebar.panel`
9: final class ActivityBarUITests: XCTestCase {
10: 
11:     private var app: XCUIApplication!
12: 
13:     override func setUp() {
14:         super.setUp()
15:         continueAfterFailure = false
16: 
17:         app = XCUIApplication()
18:         app.launchArguments += ["-ui-testing"]
19:         app.launch()
20: 
21:         // Ensure activity bar is present.
22:         XCTAssertTrue(app.buttons["activityBar.explorer"].waitForExistence(timeout: 10))
23:     }
24: 
25:     // MARK: - Helpers
26: 
27:     @discardableResult
28:     private func tapActivity(_ id: String, expectedTitle: String, file: StaticString = #filePath, line: UInt = #line) -> XCUIElement {
29:         let button = app.buttons[id]
30:         XCTAssertTrue(button.waitForExistence(timeout: 5), "Missing activity bar button: \(id)", file: file, line: line)
31:         button.tap()
32: 
33:         let sidebar = app.otherElements["sidebar.panel"]
34:         XCTAssertTrue(sidebar.waitForExistence(timeout: 5), "Sidebar should be visible after tapping \(id)", file: file, line: line)
35: 
36:         let title = app.staticTexts["sidebar.header.title"]
37:         XCTAssertTrue(title.waitForExistence(timeout: 5), "Sidebar title should exist", file: file, line: line)
38:         XCTAssertEqual(title.label, expectedTitle, file: file, line: line)
39:         return button
40:     }
41: 
42:     private func ensureSidebarVisible(file: StaticString = #filePath, line: UInt = #line) {
43:         let sidebar = app.otherElements["sidebar.panel"]
44:         if !sidebar.exists {
45:             app.buttons["activityBar.explorer"].tap()
46:         }
47:         XCTAssertTrue(app.otherElements["sidebar.panel"].waitForExistence(timeout: 5), file: file, line: line)
48:     }
49: 
50:     // MARK: - Tests
51: 
52:     func testSwitchToExplorer() {
53:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
54:     }
55: 
56:     func testSwitchToSearch() {
57:         tapActivity("activityBar.search", expectedTitle: "SEARCH")
58:     }
59: 
60:     func testSwitchToGit() {
61:         tapActivity("activityBar.sourceControl", expectedTitle: "SOURCE CONTROL")
62:     }
63: 
64:     func testSwitchToDebug() {
65:         tapActivity("activityBar.runAndDebug", expectedTitle: "RUN AND DEBUG")
66:     }
67: 
68:     func testToggleSidebarByReclick() {
69:         // Ensure sidebar is visible and Explorer selected.
70:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
71:         ensureSidebarVisible()
72: 
73:         let sidebar = app.otherElements["sidebar.panel"]
74:         XCTAssertTrue(sidebar.exists)
75: 
76:         // Re-clicking the selected icon should toggle the sidebar hidden.
77:         app.buttons["activityBar.explorer"].tap()
78:         XCTAssertFalse(sidebar.waitForExistence(timeout: 1))
79: 
80:         // Clicking again should reveal it.
81:         app.buttons["activityBar.explorer"].tap()
82:         XCTAssertTrue(sidebar.waitForExistence(timeout: 5))
83: 
84:         let title = app.staticTexts["sidebar.header.title"]
85:         XCTAssertTrue(title.waitForExistence(timeout: 5))
86:         XCTAssertEqual(title.label, "EXPLORER")
87:     }
88: }
89: 

---

[FILE VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift]
Applied 1 patch(es)

---

[FILE VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift]
Applied 1 patch(es)

---

[FILE VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift]
Applied 1 patch(es)

---

[FILE VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift]
Applied 1 patch(es)


>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift","start_line":1,"end_line":240}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (lines 2-240 of 288)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2: 
3: // MARK: - Sidebar View Structure
4: 
5: struct SidebarView: View {
6:     @ObservedObject var editorCore: EditorCore
7:     @ObservedObject var fileNavigator: FileSystemNavigator
8:     @Binding var selectedTab: Int
9:     @Binding var showSettings: Bool
10:     @Binding var showTerminal: Bool
11:     @Binding var showFolderPicker: Bool
12:     var theme: Theme = ThemeManager.shared.currentTheme
13:     
14:     var body: some View {
15:         HStack(spacing: 0) {
16:             // 1. Activity Bar (Far Left)
17:             IDEActivityBar(
18:                 editorCore: editorCore,
19:                 selectedTab: $selectedTab,
20:                 showSettings: $showSettings,
21:                 showTerminal: $showTerminal
22:             )
23:             
24:             // 2. Sidebar Panel (Resizable)
25:             if editorCore.showSidebar {
26:                 ZStack(alignment: .trailing) {
27:                     VStack(spacing: 0) {
28:                         // Header Area
29:                         HStack {
30:                             Text(sidebarTitle)
31:                                 .font(.system(size: 11, weight: .medium))
32:                                 .foregroundColor(.secondary)
33:                                 .textCase(.uppercase)
34:                                 .accessibilityIdentifier("sidebar.header.title")
35:                             Spacer()
36:                             sidebarHeaderActions
37:                         }
38:                         .padding(.horizontal, 20)
39:                         .padding(.vertical, 10)
40:                         
41:                         Divider()
42:                             .background(Color(UIColor.separator))
43:                         
44:                         // Content Area
45:                         sidebarContent
46:                             .frame(maxWidth: .infinity, maxHeight: .infinity)
47:                     }
48:                     .frame(width: editorCore.sidebarWidth)
49:                     .background(Color(UIColor.secondarySystemBackground)) // Theme aware
50:                     .accessibilityIdentifier("sidebar.panel")
51:                     
52:                     // 5. Resize Handle
53:                     ResizeHandle(width: $editorCore.sidebarWidth)
54:                 }
55:             }
56:         }
57:     }
58:     
59:     // Dynamic Title based on selection
60:     private var sidebarTitle: String {
61:         switch selectedTab {
62:         case 0: return "EXPLORER"
63:         case 1: return "SEARCH"
64:         case 2: return "SOURCE CONTROL"
65:         case 3: return "RUN AND DEBUG"
66:         case 4: return "EXTENSIONS"
67:         case 5: return "TESTING"
68:         default: return "EXPLORER"
69:         }
70:     }
71:     
72:     // Header Actions
73:     @ViewBuilder
74:     private var sidebarHeaderActions: some View {
75:         if selectedTab == 0 {
76:             HStack(spacing: 12) {
77:                 Button(action: { showFolderPicker = true }) {
78:                     Image(systemName: "folder.badge.plus")
79:                         .font(.system(size: 14))
80:                         .foregroundColor(.secondary)
81:                 }
82:                 .help("Open Folder")
83:                 
84:                 Button(action: { editorCore.addTab() }) {
85:                     Image(systemName: "doc.badge.plus")
86:                         .font(.system(size: 14))
87:                         .foregroundColor(.secondary)
88:                 }
89:                 .help("New File")
90:                 
91:                 Button(action: { fileNavigator.refreshFileTree() }) {
92:                     Image(systemName: "arrow.clockwise")
93:                         .font(.system(size: 14))
94:                         .foregroundColor(.secondary)
95:                 }
96:                 .help("Refresh")
97:                 
98:                 Button(action: { 
99:                      // Collapse All Action 
100:                      fileNavigator.expandedPaths.removeAll()
101:                 }) {
102:                     Image(systemName: "arrow.up.left.and.arrow.down.right") // Collapse icon
103:                         .font(.system(size: 14))
104:                         .foregroundColor(.secondary)
105:                 }
106:                 .help("Collapse All Folders")
107:             }
108:         }
109:     }
110:     
111:     // Content Switching
112:     @ViewBuilder
113:     private var sidebarContent: some View {
114:         switch selectedTab {
115:         case 0:
116:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
117:         case 1:
118:             SidebarSearchView(theme: theme)
119:         case 2:
120:             GitView()
121:         case 3:
122:             DebugView()
123:         case 4:
124:             ExtensionsView()
125:         case 5:
126:             TestView()
127:         default:
128:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
129:         }
130:     }
131: }
132: 
133: // MARK: - Activity Bar Implementation
134: 
135: struct IDEActivityBar: View {
136:     @ObservedObject var editorCore: EditorCore
137:     @Binding var selectedTab: Int
138:     @Binding var showSettings: Bool
139:     @Binding var showTerminal: Bool
140:     
141:     var body: some View {
142:         VStack(spacing: 0) {
143:             // Top Group
144:             Group {
145:                 ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.explorer")
146:                 ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.search")
147:                 ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.sourceControl")
148:                 ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.runAndDebug")
149:                 ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.extensions")
150:                 ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.testing")
151:             }
152:             
153:             Spacer()
154:             
155:             // Bottom Group
156:             Group {
157:                 ActivityBarButton(icon: "person.circle", title: "Accounts") {}
158:                 ActivityBarButton(icon: "gear", title: "Manage") {
159:                     showSettings = true
160:                 }
161:             }
162:             .padding(.bottom, 10)
163:         }
164:         .frame(width: 50)
165:         .background(Color(UIColor.secondarySystemBackground).opacity(0.8)) // Darker shade for activity bar
166:         .border(width: 1, edges: [.trailing], color: Color(UIColor.separator))
167:     }
168: }
169: 
170: struct ActivityBarIcon: View {
171:     let icon: String
172:     let title: String
173:     let index: Int
174:     @Binding var selectedTab: Int
175:     @ObservedObject var editorCore: EditorCore
176:     let accessibilityID: String
177:     
178:     var isSelected: Bool { selectedTab == index }
179:     
180:     var body: some View {
181:         Button(action: {
182:             if isSelected {
183:                 // Toggle sidebar visibility if clicking already selected tab
184:                 editorCore.toggleSidebar()
185:             } else {
186:                 selectedTab = index
187:                 if !editorCore.showSidebar { editorCore.toggleSidebar() }
188:             }
189:         }) {
190:             ZStack {
191:                 // Active indicator line on left
192:                 if isSelected && editorCore.showSidebar {
193:                     HStack {
194:                         Rectangle()
195:                             .fill(Color.accentColor)
196:                             .frame(width: 2)
197:                         Spacer()
198:                     }
199:                 }
200:                 
201:                 Image(systemName: icon)
202:                     .font(.system(size: 20, weight: .light))
203:                     .foregroundColor(isSelected && editorCore.showSidebar ? .primary : .secondary)
204:                     .frame(width: 50, height: 50)
205:                     .contentShape(Rectangle())
206:             }
207:         }
208:         .buttonStyle(PlainButtonStyle())
209:         .help(title)
210:         .accessibilityIdentifier(accessibilityID)
211:     }
212: }
213: 
214: struct ActivityBarButton: View {
215:     let icon: String
216:     let title: String
217:     let action: () -> Void
218:     
219:     var body: some View {
220:         Button(action: action) {
221:             Image(systemName: icon)
222:                 .font(.system(size: 20, weight: .light))
223:                 .foregroundColor(.secondary)
224:                 .frame(width: 50, height: 50)
225:                 .contentShape(Rectangle())
226:         }
227:         .buttonStyle(PlainButtonStyle())
228:         .help(title)
229:     }
230: }
231: 
232: // MARK: - Resize Handle (iPad Compatible)
233: 
234: struct ResizeHandle: View {
235:     @Binding var width: CGFloat
236:     @State private var isDragging = false
237:     
238:     var body: some View {
239:         HStack(spacing: 0) {
240:             Spacer()


>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift","start_line":1,"end_line":200}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift (lines 2-105 of 105)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2: 
3: /// UI tests for verifying activity bar interactions switch/toggle the sidebar panels.
4: ///
5: /// These tests rely on accessibility identifiers set in `SidebarView.swift` for:
6: /// - Activity bar icons: `activityBar.<panel>`
7: /// - Sidebar title: `sidebar.header.title`
8: /// - Sidebar container: `sidebar.panel`
9: final class ActivityBarUITests: XCTestCase {
10: 
11:     private var app: XCUIApplication!
12: 
13:     override func setUp() {
14:         super.setUp()
15:         continueAfterFailure = false
16: 
17:         app = XCUIApplication()
18:         app.launchArguments += ["-ui-testing"]
19:         app.launch()
20: 
21:         // Ensure activity bar is present.
22:         XCTAssertTrue(app.buttons["activityBar.explorer"].waitForExistence(timeout: 10))
23:     }
24: 
25:     // MARK: - Helpers
26: 
27:     private func waitForSidebar(visible: Bool, timeout: TimeInterval = 5, file: StaticString = #filePath, line: UInt = #line) {
28:         let sidebar = app.otherElements[\"sidebar.panel\"]
29:         let predicate = NSPredicate(format: \"exists == %@\", NSNumber(value: visible))
30:         expectation(for: predicate, evaluatedWith: sidebar)
31:         waitForExpectations(timeout: timeout)
32:         XCTAssertEqual(sidebar.exists, visible, file: file, line: line)
33:     }
34: 
35:     @discardableResult
36:     private func tapActivity(_ id: String, expectedTitle: String, file: StaticString = #filePath, line: UInt = #line) -> XCUIElement {
37:         let button = app.buttons[id]
38:         XCTAssertTrue(button.waitForExistence(timeout: 5), "Missing activity bar button: \(id)", file: file, line: line)
39:         button.tap()
40: 
41:         let sidebar = app.otherElements["sidebar.panel"]
42:         XCTAssertTrue(sidebar.waitForExistence(timeout: 5), "Sidebar should be visible after tapping \(id)", file: file, line: line)
43: 
44:         let title = app.staticTexts["sidebar.header.title"]
45:         XCTAssertTrue(title.waitForExistence(timeout: 5), "Sidebar title should exist", file: file, line: line)
46:         XCTAssertEqual(title.label, expectedTitle, file: file, line: line)
47:         return button
48:     }
49: 
50:     private func ensureSidebarVisible(file: StaticString = #filePath, line: UInt = #line) {
51:         let sidebar = app.otherElements["sidebar.panel"]
52:         if !sidebar.exists {
53:             app.buttons["activityBar.explorer"].tap()
54:         }
55:         XCTAssertTrue(app.otherElements["sidebar.panel"].waitForExistence(timeout: 5), file: file, line: line)
56:     }
57: 
58:     // MARK: - Tests
59: 
60:     func testSwitchToExplorer() {
61:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
62:     }
63: 
64:     func testSwitchToSearch() {
65:         tapActivity("activityBar.search", expectedTitle: "SEARCH")
66:     }
67: 
68:     func testSwitchToGit() {
69:         tapActivity("activityBar.sourceControl", expectedTitle: "SOURCE CONTROL")
70:     }
71: 
72:     func testSwitchToDebug() {
73:         tapActivity("activityBar.runAndDebug", expectedTitle: "RUN AND DEBUG")
74:     }
75: 
76:     func testSwitchToExtensions() {
77:         tapActivity("activityBar.extensions", expectedTitle: "EXTENSIONS")
78:     }
79: 
80:     func testSwitchToTesting() {
81:         tapActivity("activityBar.testing", expectedTitle: "TESTING")
82:     }
83: 
84:     func testToggleSidebarByReclick() {
85:         // Ensure sidebar is visible and Explorer selected.
86:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
87:         ensureSidebarVisible()
88: 
89:         let sidebar = app.otherElements["sidebar.panel"]
90:         XCTAssertTrue(sidebar.exists)
91: 
92:         // Re-clicking the selected icon should toggle the sidebar hidden.
93:         app.buttons["activityBar.explorer"].tap()
94:         waitForSidebar(visible: false)
95: 
96:         // Clicking again should reveal it.
97:         app.buttons["activityBar.explorer"].tap()
98:         waitForSidebar(visible: true)
99: 
100:         let title = app.staticTexts["sidebar.header.title"]
101:         XCTAssertTrue(title.waitForExistence(timeout: 5))
102:         XCTAssertEqual(title.label, "EXPLORER")
103:     }
104: }
105: 


>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift","start_line":1,"end_line":220}
>>>END

>>>TOOL search
{"query":"ActivityBarIcon(", "glob":"VSCodeiPadOS/VSCodeiPadOS/**/*.swift"}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (lines 2-220 of 288)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2: 
3: // MARK: - Sidebar View Structure
4: 
5: struct SidebarView: View {
6:     @ObservedObject var editorCore: EditorCore
7:     @ObservedObject var fileNavigator: FileSystemNavigator
8:     @Binding var selectedTab: Int
9:     @Binding var showSettings: Bool
10:     @Binding var showTerminal: Bool
11:     @Binding var showFolderPicker: Bool
12:     var theme: Theme = ThemeManager.shared.currentTheme
13:     
14:     var body: some View {
15:         HStack(spacing: 0) {
16:             // 1. Activity Bar (Far Left)
17:             IDEActivityBar(
18:                 editorCore: editorCore,
19:                 selectedTab: $selectedTab,
20:                 showSettings: $showSettings,
21:                 showTerminal: $showTerminal
22:             )
23:             
24:             // 2. Sidebar Panel (Resizable)
25:             if editorCore.showSidebar {
26:                 ZStack(alignment: .trailing) {
27:                     VStack(spacing: 0) {
28:                         // Header Area
29:                         HStack {
30:                             Text(sidebarTitle)
31:                                 .font(.system(size: 11, weight: .medium))
32:                                 .foregroundColor(.secondary)
33:                                 .textCase(.uppercase)
34:                                 .accessibilityIdentifier("sidebar.header.title")
35:                             Spacer()
36:                             sidebarHeaderActions
37:                         }
38:                         .padding(.horizontal, 20)
39:                         .padding(.vertical, 10)
40:                         
41:                         Divider()
42:                             .background(Color(UIColor.separator))
43:                         
44:                         // Content Area
45:                         sidebarContent
46:                             .frame(maxWidth: .infinity, maxHeight: .infinity)
47:                     }
48:                     .frame(width: editorCore.sidebarWidth)
49:                     .background(Color(UIColor.secondarySystemBackground)) // Theme aware
50:                     .accessibilityIdentifier("sidebar.panel")
51:                     
52:                     // 5. Resize Handle
53:                     ResizeHandle(width: $editorCore.sidebarWidth)
54:                 }
55:             }
56:         }
57:     }
58:     
59:     // Dynamic Title based on selection
60:     private var sidebarTitle: String {
61:         switch selectedTab {
62:         case 0: return "EXPLORER"
63:         case 1: return "SEARCH"
64:         case 2: return "SOURCE CONTROL"
65:         case 3: return "RUN AND DEBUG"
66:         case 4: return "EXTENSIONS"
67:         case 5: return "TESTING"
68:         default: return "EXPLORER"
69:         }
70:     }
71:     
72:     // Header Actions
73:     @ViewBuilder
74:     private var sidebarHeaderActions: some View {
75:         if selectedTab == 0 {
76:             HStack(spacing: 12) {
77:                 Button(action: { showFolderPicker = true }) {
78:                     Image(systemName: "folder.badge.plus")
79:                         .font(.system(size: 14))
80:                         .foregroundColor(.secondary)
81:                 }
82:                 .help("Open Folder")
83:                 
84:                 Button(action: { editorCore.addTab() }) {
85:                     Image(systemName: "doc.badge.plus")
86:                         .font(.system(size: 14))
87:                         .foregroundColor(.secondary)
88:                 }
89:                 .help("New File")
90:                 
91:                 Button(action: { fileNavigator.refreshFileTree() }) {
92:                     Image(systemName: "arrow.clockwise")
93:                         .font(.system(size: 14))
94:                         .foregroundColor(.secondary)
95:                 }
96:                 .help("Refresh")
97:                 
98:                 Button(action: { 
99:                      // Collapse All Action 
100:                      fileNavigator.expandedPaths.removeAll()
101:                 }) {
102:                     Image(systemName: "arrow.up.left.and.arrow.down.right") // Collapse icon
103:                         .font(.system(size: 14))
104:                         .foregroundColor(.secondary)
105:                 }
106:                 .help("Collapse All Folders")
107:             }
108:         }
109:     }
110:     
111:     // Content Switching
112:     @ViewBuilder
113:     private var sidebarContent: some View {
114:         switch selectedTab {
115:         case 0:
116:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
117:         case 1:
118:             SidebarSearchView(theme: theme)
119:         case 2:
120:             GitView()
121:         case 3:
122:             DebugView()
123:         case 4:
124:             ExtensionsView()
125:         case 5:
126:             TestView()
127:         default:
128:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
129:         }
130:     }
131: }
132: 
133: // MARK: - Activity Bar Implementation
134: 
135: struct IDEActivityBar: View {
136:     @ObservedObject var editorCore: EditorCore
137:     @Binding var selectedTab: Int
138:     @Binding var showSettings: Bool
139:     @Binding var showTerminal: Bool
140:     
141:     var body: some View {
142:         VStack(spacing: 0) {
143:             // Top Group
144:             Group {
145:                 ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.explorer")
146:                 ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.search")
147:                 ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.sourceControl")
148:                 ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.runAndDebug")
149:                 ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.extensions")
150:                 ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.testing")
151:             }
152:             
153:             Spacer()
154:             
155:             // Bottom Group
156:             Group {
157:                 ActivityBarButton(icon: "person.circle", title: "Accounts") {}
158:                 ActivityBarButton(icon: "gear", title: "Manage") {
159:                     showSettings = true
160:                 }
161:             }
162:             .padding(.bottom, 10)
163:         }
164:         .frame(width: 50)
165:         .background(Color(UIColor.secondarySystemBackground).opacity(0.8)) // Darker shade for activity bar
166:         .border(width: 1, edges: [.trailing], color: Color(UIColor.separator))
167:     }
168: }
169: 
170: struct ActivityBarIcon: View {
171:     let icon: String
172:     let title: String
173:     let index: Int
174:     @Binding var selectedTab: Int
175:     @ObservedObject var editorCore: EditorCore
176:     let accessibilityID: String
177:     
178:     var isSelected: Bool { selectedTab == index }
179:     
180:     var body: some View {
181:         Button(action: {
182:             if isSelected {
183:                 // Toggle sidebar visibility if clicking already selected tab
184:                 editorCore.toggleSidebar()
185:             } else {
186:                 selectedTab = index
187:                 if !editorCore.showSidebar { editorCore.toggleSidebar() }
188:             }
189:         }) {
190:             ZStack {
191:                 // Active indicator line on left
192:                 if isSelected && editorCore.showSidebar {
193:                     HStack {
194:                         Rectangle()
195:                             .fill(Color.accentColor)
196:                             .frame(width: 2)
197:                         Spacer()
198:                     }
199:                 }
200:                 
201:                 Image(systemName: icon)
202:                     .font(.system(size: 20, weight: .light))
203:                     .foregroundColor(isSelected && editorCore.showSidebar ? .primary : .secondary)
204:                     .frame(width: 50, height: 50)
205:                     .contentShape(Rectangle())
206:             }
207:         }
208:         .buttonStyle(PlainButtonStyle())
209:         .help(title)
210:         .accessibilityIdentifier(accessibilityID)
211:     }
212: }
213: 
214: struct ActivityBarButton: View {
215:     let icon: String
216:     let title: String
217:     let action: () -> Void
218:     
219:     var body: some View {
220:         Button(action: action) {

---

[search]
Found 6 matches:
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:145: ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.explorer")
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:146: ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.search")
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:147: ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.sourceControl")
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:148: ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.runAndDebug")
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:149: ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.extensions")
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:150: ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.testing")


>>>FILE VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift
>>>FIND
    private func waitForSidebar(visible: Bool, timeout: TimeInterval = 5, file: StaticString = #filePath, line: UInt = #line) {
        let sidebar = app.otherElements[\"sidebar.panel\"]
        let predicate = NSPredicate(format: \"exists == %@\", NSNumber(value: visible))
        expectation(for: predicate, evaluatedWith: sidebar)
        waitForExpectations(timeout: timeout)
        XCTAssertEqual(sidebar.exists, visible, file: file, line: line)
    }
>>>REPLACE
    private func waitForSidebar(visible: Bool, timeout: TimeInterval = 5, file: StaticString = #filePath, line: UInt = #line) {
        let sidebar = app.otherElements["sidebar.panel"]
        let predicate = NSPredicate(format: "exists == %@", NSNumber(value: visible))
        expectation(for: predicate, evaluatedWith: sidebar)
        waitForExpectations(timeout: timeout)
        XCTAssertEqual(sidebar.exists, visible, file: file, line: line)
    }
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift","start_line":1,"end_line":140}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift (lines 2-105 of 105)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2: 
3: /// UI tests for verifying activity bar interactions switch/toggle the sidebar panels.
4: ///
5: /// These tests rely on accessibility identifiers set in `SidebarView.swift` for:
6: /// - Activity bar icons: `activityBar.<panel>`
7: /// - Sidebar title: `sidebar.header.title`
8: /// - Sidebar container: `sidebar.panel`
9: final class ActivityBarUITests: XCTestCase {
10: 
11:     private var app: XCUIApplication!
12: 
13:     override func setUp() {
14:         super.setUp()
15:         continueAfterFailure = false
16: 
17:         app = XCUIApplication()
18:         app.launchArguments += ["-ui-testing"]
19:         app.launch()
20: 
21:         // Ensure activity bar is present.
22:         XCTAssertTrue(app.buttons["activityBar.explorer"].waitForExistence(timeout: 10))
23:     }
24: 
25:     // MARK: - Helpers
26: 
27:     private func waitForSidebar(visible: Bool, timeout: TimeInterval = 5, file: StaticString = #filePath, line: UInt = #line) {
28:         let sidebar = app.otherElements[\"sidebar.panel\"]
29:         let predicate = NSPredicate(format: \"exists == %@\", NSNumber(value: visible))
30:         expectation(for: predicate, evaluatedWith: sidebar)
31:         waitForExpectations(timeout: timeout)
32:         XCTAssertEqual(sidebar.exists, visible, file: file, line: line)
33:     }
34: 
35:     @discardableResult
36:     private func tapActivity(_ id: String, expectedTitle: String, file: StaticString = #filePath, line: UInt = #line) -> XCUIElement {
37:         let button = app.buttons[id]
38:         XCTAssertTrue(button.waitForExistence(timeout: 5), "Missing activity bar button: \(id)", file: file, line: line)
39:         button.tap()
40: 
41:         let sidebar = app.otherElements["sidebar.panel"]
42:         XCTAssertTrue(sidebar.waitForExistence(timeout: 5), "Sidebar should be visible after tapping \(id)", file: file, line: line)
43: 
44:         let title = app.staticTexts["sidebar.header.title"]
45:         XCTAssertTrue(title.waitForExistence(timeout: 5), "Sidebar title should exist", file: file, line: line)
46:         XCTAssertEqual(title.label, expectedTitle, file: file, line: line)
47:         return button
48:     }
49: 
50:     private func ensureSidebarVisible(file: StaticString = #filePath, line: UInt = #line) {
51:         let sidebar = app.otherElements["sidebar.panel"]
52:         if !sidebar.exists {
53:             app.buttons["activityBar.explorer"].tap()
54:         }
55:         XCTAssertTrue(app.otherElements["sidebar.panel"].waitForExistence(timeout: 5), file: file, line: line)
56:     }
57: 
58:     // MARK: - Tests
59: 
60:     func testSwitchToExplorer() {
61:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
62:     }
63: 
64:     func testSwitchToSearch() {
65:         tapActivity("activityBar.search", expectedTitle: "SEARCH")
66:     }
67: 
68:     func testSwitchToGit() {
69:         tapActivity("activityBar.sourceControl", expectedTitle: "SOURCE CONTROL")
70:     }
71: 
72:     func testSwitchToDebug() {
73:         tapActivity("activityBar.runAndDebug", expectedTitle: "RUN AND DEBUG")
74:     }
75: 
76:     func testSwitchToExtensions() {
77:         tapActivity("activityBar.extensions", expectedTitle: "EXTENSIONS")
78:     }
79: 
80:     func testSwitchToTesting() {
81:         tapActivity("activityBar.testing", expectedTitle: "TESTING")
82:     }
83: 
84:     func testToggleSidebarByReclick() {
85:         // Ensure sidebar is visible and Explorer selected.
86:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
87:         ensureSidebarVisible()
88: 
89:         let sidebar = app.otherElements["sidebar.panel"]
90:         XCTAssertTrue(sidebar.exists)
91: 
92:         // Re-clicking the selected icon should toggle the sidebar hidden.
93:         app.buttons["activityBar.explorer"].tap()
94:         waitForSidebar(visible: false)
95: 
96:         // Clicking again should reveal it.
97:         app.buttons["activityBar.explorer"].tap()
98:         waitForSidebar(visible: true)
99: 
100:         let title = app.staticTexts["sidebar.header.title"]
101:         XCTAssertTrue(title.waitForExistence(timeout: 5))
102:         XCTAssertEqual(title.label, "EXPLORER")
103:     }
104: }
105: 

---

[FILE VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift]
Applied 1 patch(es)


>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift","start_line":14,"end_line":70}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (lines 15-70 of 288)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
15:         HStack(spacing: 0) {
16:             // 1. Activity Bar (Far Left)
17:             IDEActivityBar(
18:                 editorCore: editorCore,
19:                 selectedTab: $selectedTab,
20:                 showSettings: $showSettings,
21:                 showTerminal: $showTerminal
22:             )
23:             
24:             // 2. Sidebar Panel (Resizable)
25:             if editorCore.showSidebar {
26:                 ZStack(alignment: .trailing) {
27:                     VStack(spacing: 0) {
28:                         // Header Area
29:                         HStack {
30:                             Text(sidebarTitle)
31:                                 .font(.system(size: 11, weight: .medium))
32:                                 .foregroundColor(.secondary)
33:                                 .textCase(.uppercase)
34:                                 .accessibilityIdentifier("sidebar.header.title")
35:                             Spacer()
36:                             sidebarHeaderActions
37:                         }
38:                         .padding(.horizontal, 20)
39:                         .padding(.vertical, 10)
40:                         
41:                         Divider()
42:                             .background(Color(UIColor.separator))
43:                         
44:                         // Content Area
45:                         sidebarContent
46:                             .frame(maxWidth: .infinity, maxHeight: .infinity)
47:                     }
48:                     .frame(width: editorCore.sidebarWidth)
49:                     .background(Color(UIColor.secondarySystemBackground)) // Theme aware
50:                     .accessibilityIdentifier("sidebar.panel")
51:                     
52:                     // 5. Resize Handle
53:                     ResizeHandle(width: $editorCore.sidebarWidth)
54:                 }
55:             }
56:         }
57:     }
58:     
59:     // Dynamic Title based on selection
60:     private var sidebarTitle: String {
61:         switch selectedTab {
62:         case 0: return "EXPLORER"
63:         case 1: return "SEARCH"
64:         case 2: return "SOURCE CONTROL"
65:         case 3: return "RUN AND DEBUG"
66:         case 4: return "EXTENSIONS"
67:         case 5: return "TESTING"
68:         default: return "EXPLORER"
69:         }
70:     }


>>>TOOL search
{"query":"\\\\\"", "glob":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift"}
>>>END

>>>TOOL search
{"query":"ActivityBarIcon(", "glob":"VSCodeiPadOS/VSCodeiPadOS/**/*.swift"}
>>>END

---

## ðŸ”§ TOOL RESULTS

[search]
No matches found for "\\""

---

[search]
Found 6 matches:
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:145: ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.explorer")
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:146: ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.search")
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:147: ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.sourceControl")
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:148: ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.runAndDebug")
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:149: ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.extensions")
VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift:150: ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.testing")


>>>FILE VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift
>>>FIND
    private func waitForSidebar(visible: Bool, timeout: TimeInterval = 5, file: StaticString = #filePath, line: UInt = #line) {
        let sidebar = app.otherElements[\"sidebar.panel\"]
        let predicate = NSPredicate(format: \"exists == %@\", NSNumber(value: visible))
        expectation(for: predicate, evaluatedWith: sidebar)
        waitForExpectations(timeout: timeout)
        XCTAssertEqual(sidebar.exists, visible, file: file, line: line)
    }
>>>REPLACE
    private func waitForSidebar(visible: Bool, timeout: TimeInterval = 5, file: StaticString = #filePath, line: UInt = #line) {
        let sidebar = app.otherElements["sidebar.panel"]
        let predicate = NSPredicate(format: "exists == %@", NSNumber(value: visible))
        expectation(for: predicate, evaluatedWith: sidebar)
        waitForExpectations(timeout: timeout)
        XCTAssertEqual(sidebar.exists, visible, file: file, line: line)
    }
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift","start_line":1,"end_line":140}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift (lines 2-105 of 105)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2: 
3: /// UI tests for verifying activity bar interactions switch/toggle the sidebar panels.
4: ///
5: /// These tests rely on accessibility identifiers set in `SidebarView.swift` for:
6: /// - Activity bar icons: `activityBar.<panel>`
7: /// - Sidebar title: `sidebar.header.title`
8: /// - Sidebar container: `sidebar.panel`
9: final class ActivityBarUITests: XCTestCase {
10: 
11:     private var app: XCUIApplication!
12: 
13:     override func setUp() {
14:         super.setUp()
15:         continueAfterFailure = false
16: 
17:         app = XCUIApplication()
18:         app.launchArguments += ["-ui-testing"]
19:         app.launch()
20: 
21:         // Ensure activity bar is present.
22:         XCTAssertTrue(app.buttons["activityBar.explorer"].waitForExistence(timeout: 10))
23:     }
24: 
25:     // MARK: - Helpers
26: 
27:     private func waitForSidebar(visible: Bool, timeout: TimeInterval = 5, file: StaticString = #filePath, line: UInt = #line) {
28:         let sidebar = app.otherElements["sidebar.panel"]
29:         let predicate = NSPredicate(format: "exists == %@", NSNumber(value: visible))
30:         expectation(for: predicate, evaluatedWith: sidebar)
31:         waitForExpectations(timeout: timeout)
32:         XCTAssertEqual(sidebar.exists, visible, file: file, line: line)
33:     }
34: 
35:     @discardableResult
36:     private func tapActivity(_ id: String, expectedTitle: String, file: StaticString = #filePath, line: UInt = #line) -> XCUIElement {
37:         let button = app.buttons[id]
38:         XCTAssertTrue(button.waitForExistence(timeout: 5), "Missing activity bar button: \(id)", file: file, line: line)
39:         button.tap()
40: 
41:         let sidebar = app.otherElements["sidebar.panel"]
42:         XCTAssertTrue(sidebar.waitForExistence(timeout: 5), "Sidebar should be visible after tapping \(id)", file: file, line: line)
43: 
44:         let title = app.staticTexts["sidebar.header.title"]
45:         XCTAssertTrue(title.waitForExistence(timeout: 5), "Sidebar title should exist", file: file, line: line)
46:         XCTAssertEqual(title.label, expectedTitle, file: file, line: line)
47:         return button
48:     }
49: 
50:     private func ensureSidebarVisible(file: StaticString = #filePath, line: UInt = #line) {
51:         let sidebar = app.otherElements["sidebar.panel"]
52:         if !sidebar.exists {
53:             app.buttons["activityBar.explorer"].tap()
54:         }
55:         XCTAssertTrue(app.otherElements["sidebar.panel"].waitForExistence(timeout: 5), file: file, line: line)
56:     }
57: 
58:     // MARK: - Tests
59: 
60:     func testSwitchToExplorer() {
61:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
62:     }
63: 
64:     func testSwitchToSearch() {
65:         tapActivity("activityBar.search", expectedTitle: "SEARCH")
66:     }
67: 
68:     func testSwitchToGit() {
69:         tapActivity("activityBar.sourceControl", expectedTitle: "SOURCE CONTROL")
70:     }
71: 
72:     func testSwitchToDebug() {
73:         tapActivity("activityBar.runAndDebug", expectedTitle: "RUN AND DEBUG")
74:     }
75: 
76:     func testSwitchToExtensions() {
77:         tapActivity("activityBar.extensions", expectedTitle: "EXTENSIONS")
78:     }
79: 
80:     func testSwitchToTesting() {
81:         tapActivity("activityBar.testing", expectedTitle: "TESTING")
82:     }
83: 
84:     func testToggleSidebarByReclick() {
85:         // Ensure sidebar is visible and Explorer selected.
86:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
87:         ensureSidebarVisible()
88: 
89:         let sidebar = app.otherElements["sidebar.panel"]
90:         XCTAssertTrue(sidebar.exists)
91: 
92:         // Re-clicking the selected icon should toggle the sidebar hidden.
93:         app.buttons["activityBar.explorer"].tap()
94:         waitForSidebar(visible: false)
95: 
96:         // Clicking again should reveal it.
97:         app.buttons["activityBar.explorer"].tap()
98:         waitForSidebar(visible: true)
99: 
100:         let title = app.staticTexts["sidebar.header.title"]
101:         XCTAssertTrue(title.waitForExistence(timeout: 5))
102:         XCTAssertEqual(title.label, "EXPLORER")
103:     }
104: }
105: 

---

[FILE VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift]
Failed:     private func waitForSidebar(visible: Bool, tim...




>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift"}
>>>END

>>>TOOL read_file
{"path":"VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift","start_line":120,"end_line":215}
>>>END

---

## ðŸ”§ TOOL RESULTS

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift (lines 1-105 of 105)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1: import XCTest
2: 
3: /// UI tests for verifying activity bar interactions switch/toggle the sidebar panels.
4: ///
5: /// These tests rely on accessibility identifiers set in `SidebarView.swift` for:
6: /// - Activity bar icons: `activityBar.<panel>`
7: /// - Sidebar title: `sidebar.header.title`
8: /// - Sidebar container: `sidebar.panel`
9: final class ActivityBarUITests: XCTestCase {
10: 
11:     private var app: XCUIApplication!
12: 
13:     override func setUp() {
14:         super.setUp()
15:         continueAfterFailure = false
16: 
17:         app = XCUIApplication()
18:         app.launchArguments += ["-ui-testing"]
19:         app.launch()
20: 
21:         // Ensure activity bar is present.
22:         XCTAssertTrue(app.buttons["activityBar.explorer"].waitForExistence(timeout: 10))
23:     }
24: 
25:     // MARK: - Helpers
26: 
27:     private func waitForSidebar(visible: Bool, timeout: TimeInterval = 5, file: StaticString = #filePath, line: UInt = #line) {
28:         let sidebar = app.otherElements["sidebar.panel"]
29:         let predicate = NSPredicate(format: "exists == %@", NSNumber(value: visible))
30:         expectation(for: predicate, evaluatedWith: sidebar)
31:         waitForExpectations(timeout: timeout)
32:         XCTAssertEqual(sidebar.exists, visible, file: file, line: line)
33:     }
34: 
35:     @discardableResult
36:     private func tapActivity(_ id: String, expectedTitle: String, file: StaticString = #filePath, line: UInt = #line) -> XCUIElement {
37:         let button = app.buttons[id]
38:         XCTAssertTrue(button.waitForExistence(timeout: 5), "Missing activity bar button: \(id)", file: file, line: line)
39:         button.tap()
40: 
41:         let sidebar = app.otherElements["sidebar.panel"]
42:         XCTAssertTrue(sidebar.waitForExistence(timeout: 5), "Sidebar should be visible after tapping \(id)", file: file, line: line)
43: 
44:         let title = app.staticTexts["sidebar.header.title"]
45:         XCTAssertTrue(title.waitForExistence(timeout: 5), "Sidebar title should exist", file: file, line: line)
46:         XCTAssertEqual(title.label, expectedTitle, file: file, line: line)
47:         return button
48:     }
49: 
50:     private func ensureSidebarVisible(file: StaticString = #filePath, line: UInt = #line) {
51:         let sidebar = app.otherElements["sidebar.panel"]
52:         if !sidebar.exists {
53:             app.buttons["activityBar.explorer"].tap()
54:         }
55:         XCTAssertTrue(app.otherElements["sidebar.panel"].waitForExistence(timeout: 5), file: file, line: line)
56:     }
57: 
58:     // MARK: - Tests
59: 
60:     func testSwitchToExplorer() {
61:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
62:     }
63: 
64:     func testSwitchToSearch() {
65:         tapActivity("activityBar.search", expectedTitle: "SEARCH")
66:     }
67: 
68:     func testSwitchToGit() {
69:         tapActivity("activityBar.sourceControl", expectedTitle: "SOURCE CONTROL")
70:     }
71: 
72:     func testSwitchToDebug() {
73:         tapActivity("activityBar.runAndDebug", expectedTitle: "RUN AND DEBUG")
74:     }
75: 
76:     func testSwitchToExtensions() {
77:         tapActivity("activityBar.extensions", expectedTitle: "EXTENSIONS")
78:     }
79: 
80:     func testSwitchToTesting() {
81:         tapActivity("activityBar.testing", expectedTitle: "TESTING")
82:     }
83: 
84:     func testToggleSidebarByReclick() {
85:         // Ensure sidebar is visible and Explorer selected.
86:         tapActivity("activityBar.explorer", expectedTitle: "EXPLORER")
87:         ensureSidebarVisible()
88: 
89:         let sidebar = app.otherElements["sidebar.panel"]
90:         XCTAssertTrue(sidebar.exists)
91: 
92:         // Re-clicking the selected icon should toggle the sidebar hidden.
93:         app.buttons["activityBar.explorer"].tap()
94:         waitForSidebar(visible: false)
95: 
96:         // Clicking again should reveal it.
97:         app.buttons["activityBar.explorer"].tap()
98:         waitForSidebar(visible: true)
99: 
100:         let title = app.staticTexts["sidebar.header.title"]
101:         XCTAssertTrue(title.waitForExistence(timeout: 5))
102:         XCTAssertEqual(title.label, "EXPLORER")
103:     }
104: }
105: 

---

[read_file]
File: VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (lines 121-215 of 288)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
121:         case 3:
122:             DebugView()
123:         case 4:
124:             ExtensionsView()
125:         case 5:
126:             TestView()
127:         default:
128:             IDESidebarFiles(editorCore: editorCore, fileNavigator: fileNavigator, showFolderPicker: $showFolderPicker, theme: theme)
129:         }
130:     }
131: }
132: 
133: // MARK: - Activity Bar Implementation
134: 
135: struct IDEActivityBar: View {
136:     @ObservedObject var editorCore: EditorCore
137:     @Binding var selectedTab: Int
138:     @Binding var showSettings: Bool
139:     @Binding var showTerminal: Bool
140:     
141:     var body: some View {
142:         VStack(spacing: 0) {
143:             // Top Group
144:             Group {
145:                 ActivityBarIcon(icon: "doc.on.doc", title: "Explorer", index: 0, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.explorer")
146:                 ActivityBarIcon(icon: "magnifyingglass", title: "Search", index: 1, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.search")
147:                 ActivityBarIcon(icon: "arrow.triangle.branch", title: "Source Control", index: 2, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.sourceControl")
148:                 ActivityBarIcon(icon: "play.fill", title: "Run and Debug", index: 3, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.runAndDebug")
149:                 ActivityBarIcon(icon: "square.grid.2x2", title: "Extensions", index: 4, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.extensions")
150:                 ActivityBarIcon(icon: "testtube.2", title: "Testing", index: 5, selectedTab: $selectedTab, editorCore: editorCore, accessibilityID: "activityBar.testing")
151:             }
152:             
153:             Spacer()
154:             
155:             // Bottom Group
156:             Group {
157:                 ActivityBarButton(icon: "person.circle", title: "Accounts") {}
158:                 ActivityBarButton(icon: "gear", title: "Manage") {
159:                     showSettings = true
160:                 }
161:             }
162:             .padding(.bottom, 10)
163:         }
164:         .frame(width: 50)
165:         .background(Color(UIColor.secondarySystemBackground).opacity(0.8)) // Darker shade for activity bar
166:         .border(width: 1, edges: [.trailing], color: Color(UIColor.separator))
167:     }
168: }
169: 
170: struct ActivityBarIcon: View {
171:     let icon: String
172:     let title: String
173:     let index: Int
174:     @Binding var selectedTab: Int
175:     @ObservedObject var editorCore: EditorCore
176:     let accessibilityID: String
177:     
178:     var isSelected: Bool { selectedTab == index }
179:     
180:     var body: some View {
181:         Button(action: {
182:             if isSelected {
183:                 // Toggle sidebar visibility if clicking already selected tab
184:                 editorCore.toggleSidebar()
185:             } else {
186:                 selectedTab = index
187:                 if !editorCore.showSidebar { editorCore.toggleSidebar() }
188:             }
189:         }) {
190:             ZStack {
191:                 // Active indicator line on left
192:                 if isSelected && editorCore.showSidebar {
193:                     HStack {
194:                         Rectangle()
195:                             .fill(Color.accentColor)
196:                             .frame(width: 2)
197:                         Spacer()
198:                     }
199:                 }
200:                 
201:                 Image(systemName: icon)
202:                     .font(.system(size: 20, weight: .light))
203:                     .foregroundColor(isSelected && editorCore.showSidebar ? .primary : .secondary)
204:                     .frame(width: 50, height: 50)
205:                     .contentShape(Rectangle())
206:             }
207:         }
208:         .buttonStyle(PlainButtonStyle())
209:         .help(title)
210:         .accessibilityIdentifier(accessibilityID)
211:     }
212: }
213: 
214: struct ActivityBarButton: View {
215:     let icon: String


>>>REPORT
Work completed to add XCUITest coverage for Activity Bar panel switching and sidebar toggling.

Modified files (allowed):
1) VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift
- Added accessibility identifiers required for UI testing:
  - Sidebar title text now has `.accessibilityIdentifier("sidebar.header.title")` (see lines 29-35 in read_file output; specifically line 34).
  - Sidebar panel container (the VStack that represents the sidebar panel) now has `.accessibilityIdentifier("sidebar.panel")` (line 50 in read_file output).
- Updated Activity Bar icons to be discoverable in UI tests:
  - IDEActivityBar now constructs ActivityBarIcon with explicit IDs:
    - Explorer: "activityBar.explorer"
    - Search: "activityBar.search"
    - Source Control: "activityBar.sourceControl"
    - Run and Debug: "activityBar.runAndDebug"
    - Extensions: "activityBar.extensions"
    - Testing: "activityBar.testing"
  (see lines 145-150 in read_file output)
- Extended ActivityBarIcon to accept `accessibilityID` and apply `.accessibilityIdentifier(accessibilityID)` to its Button (see lines 170-211 in read_file output; identifier applied at line 210).

2) VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift
- Created new UI test class `ActivityBarUITests: XCTestCase` (entire file shown in read_file output).
- Implemented tests that tap activity bar buttons and assert the sidebar title changes accordingly:
  - testSwitchToExplorer (lines 60-62)
  - testSwitchToSearch (lines 64-66)
  - testSwitchToGit (lines 68-70)
  - testSwitchToDebug (lines 72-74)
  - (also added) testSwitchToExtensions (lines 76-78) and testSwitchToTesting (lines 80-82) to cover all requested panels.
- Implemented toggle behavior test:
  - testToggleSidebarByReclick (lines 84-103) verifies re-tapping the selected Explorer icon hides the sidebar and tapping again shows it.
- Added helper `waitForSidebar(visible:)` using NSPredicate on existence of `sidebar.panel` (lines 27-33) to make show/hide assertions reliable.

Evidence gathered from tool outputs:
- Sidebar identifiers and updated ActivityBarIcon signature: VSCodeiPadOS/VSCodeiPadOS/Views/SidebarView.swift (lines 15-55 and 145-211 shown).
- UI tests content and test method names: VSCodeiPadOS/VSCodeiPadOS/UITests/ActivityBarUITests.swift (lines 1-105 shown).
>>>END
